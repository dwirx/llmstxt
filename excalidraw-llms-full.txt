# https://docs.excalidraw.com/docs llms-full.txt

## Excalidraw Documentation
[Skip to main content](https://docs.excalidraw.com/docs#docusaurus_skipToContent_fallback)

On this page

## Try now [​](https://docs.excalidraw.com/docs\#try-now "Direct link to heading")

Go to [excalidraw.com](https://excalidraw.com/) to start sketching.

## How are these docs structured [​](https://docs.excalidraw.com/docs\#how-are-these-docs-structured "Direct link to heading")

These docs are focused on developers, and structured in the following way:

- [Introduction](https://docs.excalidraw.com/docs/) — development setup and introduction.
- [@excalidraw/excalidraw](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/installation) — docs for the npm package to help you integrate Excalidraw into your own app.
- Editor — IN PROGRESS. Docs describing the internals of the Excalidraw editor to help in contributing to the codebase.
- [@excalidraw/mermaid-to-excalidraw](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/installation) \- Docs for the mermaid to excalidraw parser

- [Try now](https://docs.excalidraw.com/docs#try-now)
- [How are these docs structured](https://docs.excalidraw.com/docs#how-are-these-docs-structured)

## Excalidraw JSON Schema
[Skip to main content](https://docs.excalidraw.com/docs/codebase/json-schema#docusaurus_skipToContent_fallback)

On this page

# JSON Schema

The Excalidraw data format uses plaintext JSON.

## Excalidraw files [​](https://docs.excalidraw.com/docs/codebase/json-schema\#excalidraw-files "Direct link to heading")

When saving an Excalidraw scene locally to a file, the JSON file ( `.excalidraw`) is using the below format.

### Attributes [​](https://docs.excalidraw.com/docs/codebase/json-schema\#attributes "Direct link to heading")

| Attribute | Description | Value |
| --- | --- | --- |
| `type` | The type of the Excalidraw schema | `"excalidraw"` |
| `version` | The version of the Excalidraw schema | number |
| `source` | The source URL of the Excalidraw application | `"https://excalidraw.com"` |
| `elements` | An array of objects representing excalidraw elements on canvas | Array containing excalidraw element objects |
| `appState` | Additional application state/configuration | Object containing application state properties |
| `files` | Data for excalidraw `image` elements | Object containing image data |

### JSON Schema example [​](https://docs.excalidraw.com/docs/codebase/json-schema\#json-schema-example "Direct link to heading")

```codeBlockLines_e6Vv
{
  // schema information
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",

  // elements on canvas
  "elements": [\
    // example element\
    {\
      "id": "pologsyG-tAraPgiN9xP9b",\
      "type": "rectangle",\
      "x": 928,\
      "y": 319,\
      "width": 134,\
      "height": 90\
      /* ...other element properties */\
    }\
    /* other elements */\
  ],

  // editor state (canvas config, preferences, ...)
  "appState": {
    "gridSize": 20,
    "viewBackgroundColor": "#ffffff"
  },

  // files data for "image" elements, using format `{ [fileId]: fileData }`
  "files": {
    // example of an image data object
    "3cebd7720911620a3938ce77243696149da03861": {
      "mimeType": "image/png",
      "id": "3cebd7720911620a3938c.77243626149da03861",
      "dataURL": "data:image/png;base64,iVBORWOKGgoAAAANSUhEUgA=",
      "created": 1690295874454,
      "lastRetrieved": 1690295874454
    }
    /* ...other image data objects */
  }
}

```

## Excalidraw clipboard format [​](https://docs.excalidraw.com/docs/codebase/json-schema\#excalidraw-clipboard-format "Direct link to heading")

When copying selected excalidraw elements to clipboard, the JSON schema is similar to `.excalidraw` format, except it differs in attributes.

### Attributes [​](https://docs.excalidraw.com/docs/codebase/json-schema\#attributes-1 "Direct link to heading")

| Attribute | Description | Example Value |
| --- | --- | --- |
| `type` | The type of the Excalidraw document. | "excalidraw/clipboard" |
| `elements` | An array of objects representing excalidraw elements on canvas. | Array containing excalidraw element objects (see example below) |
| `files` | Data for excalidraw `image` elements. | Object containing image data |

- [Excalidraw files](https://docs.excalidraw.com/docs/codebase/json-schema#excalidraw-files)
  - [Attributes](https://docs.excalidraw.com/docs/codebase/json-schema#attributes)
  - [JSON Schema example](https://docs.excalidraw.com/docs/codebase/json-schema#json-schema-example)
- [Excalidraw clipboard format](https://docs.excalidraw.com/docs/codebase/json-schema#excalidraw-clipboard-format)
  - [Attributes](https://docs.excalidraw.com/docs/codebase/json-schema#attributes-1)

## Excalidraw API Overview
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api#docusaurus_skipToContent_fallback)

# API

Currently the **API** is divided into 3 broad categories 👇

- [Props](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props) \- The `props` you can pass to the `Excalidraw` component.
- [Children components](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components) \- Official components you can use to customize the UI.
- [Utils](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils) \- Utilities and helpers you can use to export, restore and more.

## Excalidraw Style Customization
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/customizing-styles#docusaurus_skipToContent_fallback)

# Customizing Styles

Excalidraw uses CSS variables to style certain components. To override them, you should set your own on the `.excalidraw` and `.excalidraw.theme--dark` (for dark mode variables) selectors.

Make sure the selector has higher specificity, e.g. by prefixing it with your app's selector:

```codeBlockLines_e6Vv
.your-app .excalidraw {
  --color-primary: red;
}
.your-app .excalidraw.theme--dark {
  --color-primary: pink;
}

```

Most notably, you can customize the primary colors, by overriding these variables:

- `--color-primary`
- `--color-primary-darker`
- `--color-primary-darkest`
- `--color-primary-light`
- `--color-primary-contrast-offset` — a slightly darker (in light mode), or lighter (in dark mode) `--color-primary` color to fix contrast issues (see [Chubb illusion](https://en.wikipedia.org/wiki/Chubb_illusion)). It will fall back to `--color-primary` if not present.

For a complete list of variables, check [theme.scss](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/css/theme.scss), though most of them will not make sense to override.

```codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm
.custom-styles .excalidraw {
  --color-primary: #fcc6d9;
  --color-primary-darker: #f783ac;
  --color-primary-darkest: #e64980;
  --color-primary-light: #f2a9c4;
}

.custom-styles .excalidraw.theme--dark {
  --color-primary: #d494aa;
  --color-primary-darker: #d64c7e;
  --color-primary-darkest: #e86e99;
  --color-primary-light: #dcbec9;
}

```

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px" }} className="custom-styles">
      <Excalidraw />
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

## Excalidraw Integration Guide
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/integration#docusaurus_skipToContent_fallback)

On this page

# Integration

## Module bundler [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/integration\#module-bundler "Direct link to heading")

If you are using a module bundler (for instance, Webpack), you can import it as an ES6 module as shown below

```codeBlockLines_e6Vv
import { Excalidraw } from "@excalidraw/excalidraw";

```

info

Throughout the documentation we use live, editable Excalidraw examples like the one shown below.

While we aim for the examples to closely reflect what you'd get if you rendered it yourself, we actually initialize it with some props behind the scenes.
For example, we're passing a `theme` prop to it based on the current color theme of the docs you're just reading.

Live Editor

```

function App() {
  return (
    <>
      <h1 style={{ textAlign: "center" }}>Excalidraw Example</h1>
      <div style={{ height: "500px" }}>
        <Excalidraw />
      </div>
    </>
  );
}
```

Result

# Excalidraw Example

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

### Next.js [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/integration\#nextjs "Direct link to heading")

Since Excalidraw doesn't support `server side rendering` so it should be rendered only on `client`. The way to achieve this in next.js is using `next.js dynamic import`.

If you want to only import `Excalidraw` component you can do 👇

```codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm
import dynamic from "next/dynamic";
import "@excalidraw/excalidraw/index.css";

const Excalidraw = dynamic(
  async () => (await import("@excalidraw/excalidraw")).Excalidraw,
  {
    ssr: false,
  },
);
export default function App() {
  return <Excalidraw />;
}

```

However the above component only works for named component exports. If you want to import some util / constant or something else apart from Excalidraw, then this approach will not work. Instead you can write a wrapper over Excalidraw and import the wrapper dynamically.

If you are using `pages router` then importing the wrapper dynamically would work, where as if you are using `app router` then you will have to also add `useClient` directive on top of the file in addition to dynamically importing the wrapper as shown 👇

- Excalidraw Wrapper
- Pages router
- App router

```codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm
"use client";
import { Excalidraw, convertToExcalidrawElements } from "@excalidraw/excalidraw";

import "@excalidraw/excalidraw/index.css";

const ExcalidrawWrapper: React.FC = () => {
  console.info(convertToExcalidrawElements([{\
    type: "rectangle",\
    id: "rect-1",\
    width: 186.47265625,\
    height: 141.9765625,\
  },]));
  return (
    <div style={{height:"500px", width:"500px"}}>
      <Excalidraw />
    </div>
  );
};
export default ExcalidrawWrapper;

```

{/ _Link should be updated to point to the latest!_/}
Here is a [source code](https://github.com/excalidraw/excalidraw/tree/master/examples/with-nextjs) for the example with app and pages router. You you can try it out [here](https://excalidraw-package-example-with-nextjs.vercel.app/).

The `types` are available at `@excalidraw/excalidraw/types`, check [CodeSandbox](https://codesandbox.io/p/sandbox/github/excalidraw/excalidraw/tree/master/examples/with-script-in-browser) example for details.

### Preact [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/integration\#preact "Direct link to heading")

Since we support `umd` build ships with `react/jsx-runtime` and `react-dom/client` inlined with the package. This conflicts with `Preact` and hence the build doesn't work directly with `Preact`.

However we have shipped a separate build for `Preact` so if you are using `Preact` you need to set `process.env.IS_PREACT` to `true` to use the `Preact` build.

Once the above `env` variable is set, you will be able to use the package in `Preact` as well.

info

When using `vite` or any build tools, you will have to make sure the `process` is accessible as we are accessing `process.env.IS_PREACT` to decide whether to use `preact` build.

Since Vite removes env variables by default, you can update the vite config to ensure its available 👇

```codeBlockLines_e6Vv
 define: {
    "process.env.IS_PREACT": JSON.stringify("true"),
  },

```

## Browser [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/integration\#browser "Direct link to heading")

To use it Excalidraw in a browser directly, use the following setup 👇

> **Note**: We rely on import maps to de-duplicate `react`, `react-dom` and `react/jsx-runtime` versions.

- html
- Javascript

```codeBlockLines_e6Vv
<!DOCTYPE html>
<html>
  <head>
    <title>Excalidraw in browser</title>
    <meta charset="UTF-8" />
    <link
      rel="stylesheet"
      href="https://esm.sh/@excalidraw/excalidraw@0.18.0/dist/dev/index.css"
    />
    <link rel="stylesheet" href="./index.css" />
    <script>
        window.EXCALIDRAW_ASSET_PATH = "https://esm.sh/@excalidraw/excalidraw@0.18.0/dist/prod/";
        </script>
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react@19.0.0",
          "react/jsx-runtime": "https://esm.sh/react@19.0.0/jsx-runtime",
          "react-dom": "https://esm.sh/react-dom@19.0.0"
          }
      }
    </script>
  </head>

  <body>
    <div class="container">
      <h1>Excalidraw Embed Example</h1>
      <div id="app"></div>
    </div>
    <script type="text/javascript" src="packages/excalidraw/index.js"></script>
  </body>
</html>

```

You can try it out [here](https://jsfiddle.net/vfn6dm14/3/).

- [Module bundler](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/integration#module-bundler)
  - [Next.js](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/integration#nextjs)
  - [Preact](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/integration#preact)
- [Browser](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/integration#browser)

## Excalidraw FAQ
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#docusaurus_skipToContent_fallback)

On this page

# FAQ

### Does this package support collaboration ? [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq\#does-this-package-support-collaboration- "Direct link to heading")

No, Excalidraw package doesn't come with collaboration built in, since the implementation is specific to each host app. We expose APIs which you can use to communicate with Excalidraw which you can use to implement it. You can check our own implementation [here](https://github.com/excalidraw/excalidraw/blob/master/excalidraw-app/index.tsx). Here is a [detailed answer](https://github.com/excalidraw/excalidraw/discussions/3879#discussioncomment-1110524) on how you can achieve the same.

### Turning off Aggressive Anti-Fingerprinting in Brave browser [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq\#turning-off-aggressive-anti-fingerprinting-in-brave-browser "Direct link to heading")

When _Aggressive Anti-Fingerprinting_ is turned on, the `measureText` API breaks which in turn breaks the Text Elements in your drawings. Here is more [info](https://github.com/excalidraw/excalidraw/pull/6336) on the same.

We strongly recommend turning it off. You can follow the steps below on how to do so.

1. Open [excalidraw.com](https://excalidraw.com/) in Brave and click on the **Shield** button
![Shield button](https://docs.excalidraw.com/assets/images/brave-shield-97b643bea88437df3a15d639703d1a7b.png)

2. Once opened, look for **Aggressively Block Fingerprinting**![Aggressive block fingerprinting](https://docs.excalidraw.com/assets/images/aggressive-block-fingerprint-52e57b6f3b7569835f1a04d9e544bc27.png)

3. Switch to **Block Fingerprinting**![Block filtering](https://docs.excalidraw.com/assets/images/block-fingerprint-2d28c57b6cfeed4b48acde7329027753.png)

4. Thats all. All text elements should be fixed now 🎉


If disabling this setting doesn't fix the display of text elements, please consider opening an [issue](https://github.com/excalidraw/excalidraw/issues/new) on our GitHub, or message us on [Discord](https://discord.gg/UexuTaE).

### ReferenceError: process is not defined [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq\#referenceerror-process-is-not-defined "Direct link to heading")

When using `vite` or any build tools, you will have to make sure the `process` is accessible as we are accessing `process.env.IS_PREACT` to decide whether to use `preact` build.

Since Vite removes env variables by default, you can update the vite config to ensure its available 👇

```codeBlockLines_e6Vv
 define: {
    "process.env.IS_PREACT": JSON.stringify("true"),
  },

```

## Need help? [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq\#need-help "Direct link to heading")

Check out the existing [Q&A](https://github.com/excalidraw/excalidraw/discussions?discussions_q=label%3Apackage%3Aexcalidraw). If you have any queries or need help, ask us [here](https://github.com/excalidraw/excalidraw/discussions?discussions_q=label%3Apackage%3Aexcalidraw).

- [Does this package support collaboration ?](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#does-this-package-support-collaboration-)
- [Turning off Aggressive Anti-Fingerprinting in Brave browser](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggressive-anti-fingerprinting-in-brave-browser)
- [ReferenceError: process is not defined](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#referenceerror-process-is-not-defined)
- [Need help?](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#need-help)

## Excalidraw Development Guide
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/development#docusaurus_skipToContent_fallback)

On this page

# Development

This page relates to developing the `@excalidraw/excalidraw` package itself.

## Example app [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/development\#example-app "Direct link to heading")

To start the example app using the `@excalidraw/excalidraw` package, follow the below steps:

1. Install the dependencies





```codeBlockLines_e6Vv
yarn

```

2. Start the example app





```codeBlockLines_e6Vv
yarn start:example

```









[http://localhost:3001](http://localhost:3001/) will open in your default browser.

This is the same example as the [CodeSandbox](https://codesandbox.io/p/sandbox/github/excalidraw/excalidraw/tree/master/examples/with-script-in-browser) example.


## Releasing [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/development\#releasing "Direct link to heading")

### Creating a production release [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/development\#creating-a-production-release "Direct link to heading")

To release the next stable version follow the below steps:

```codeBlockLines_e6Vv
yarn release --tag=latest --version=0.19.0

```

You will need to pass the `latest` tag with `version` for which you want to create the release. This will make the changes needed before publishing the packages into NPM, like updating dependencies of all `@excalidraw/*` packages, generating new entries in `CHANGELOG.md` and more.

- [Example app](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/development#example-app)
- [Releasing](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/development#releasing)
  - [Creating a production release](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/development#creating-a-production-release)

## Contributing to Excalidraw
[Skip to main content](https://docs.excalidraw.com/docs/introduction/contributing#docusaurus_skipToContent_fallback)

On this page

# Contributing

Pull requests are welcome. For major changes, please [open an issue](https://github.com/excalidraw/excalidraw/issues/new) first to discuss what you would like to change.

We have a [roadmap](https://github.com/orgs/excalidraw/projects/3) which we strongly recommend to go through and check if something interests you.
For new contributors we would recommend to start with _Easy_ tasks.

In case you want to pick up something from the roadmap, comment on that issue and one of the project maintainers will assign it to you, post which you can discuss in the issue and start working on it.

## Setup [​](https://docs.excalidraw.com/docs/introduction/contributing\#setup "Direct link to heading")

### Option 1 - Manual [​](https://docs.excalidraw.com/docs/introduction/contributing\#option-1---manual "Direct link to heading")

1. Fork and clone the repo
2. Run `yarn` to install dependencies
3. Create a branch for your PR with `git checkout -b your-branch-name`

> To keep `master` branch pointing to remote repository and make pull requests from branches on your fork, run:
>
> ```codeBlockLines_e6Vv
> git remote add upstream https://github.com/excalidraw/excalidraw.git
> git fetch upstream
> git branch --set-upstream-to=upstream/master master
>
> ```

### Option 2 - CodeSandbox [​](https://docs.excalidraw.com/docs/introduction/contributing\#option-2---codesandbox "Direct link to heading")

1. Go to [https://codesandbox.io/p/github/excalidraw/excalidraw](https://codesandbox.io/p/github/excalidraw/excalidraw)
2. Connect your GitHub account
3. Go to Git tab on left side
4. Tap on `Fork Sandbox`
5. Write your code
6. Commit and PR automatically

## Pull Request Guidelines [​](https://docs.excalidraw.com/docs/introduction/contributing\#pull-request-guidelines "Direct link to heading")

Don't worry if you get any of the below wrong, or if you don't know how. We'll gladly help out.

### Title [​](https://docs.excalidraw.com/docs/introduction/contributing\#title "Direct link to heading")

Make sure the title starts with a semantic prefix:

- **feat**: A new feature
- **fix**: A bug fix
- **docs**: Documentation only changes
- **style**: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)
- **refactor**: A code change that neither fixes a bug nor adds a feature
- **perf**: A code change that improves performance
- **test**: Adding missing tests or correcting existing tests
- **build**: Changes that affect the build system or external dependencies (example scopes: gulp, broccoli, npm)
- **ci**: Changes to our CI configuration files and scripts (example scopes: Travis, Circle, BrowserStack, SauceLabs)
- **chore**: Other changes that don't modify src or test files
- **revert**: Reverts a previous commit

### Testing [​](https://docs.excalidraw.com/docs/introduction/contributing\#testing "Direct link to heading")

Once you submit your pull request it will automatically be tested. Be sure to check the results of the test and fix any issues that arise.

It's also a good idea to consider if your change should include additional tests. This is highly recommended for new features or bug-fixes. For example, it's good practice to create a test for each bug you fix which ensures that we don't regress the code in the future.

Finally - always manually test your changes using the convenient staging environment deployed for each pull request. As much as local development attempts to replicate production, there can still be subtle differences in behavior. For larger features consider testing your change in multiple browsers as well.

note

Some checks, such as the `lint` and `test`, require approval from the maintainers to run.
They will appear as `Expected — Waiting for status to be reported` in the PR checks when they are waiting for approval.

## Translating [​](https://docs.excalidraw.com/docs/introduction/contributing\#translating "Direct link to heading")

To translate Excalidraw into other languages, please visit [our Crowdin page](https://crowdin.com/project/excalidraw). To add a new language, [open an issue](https://github.com/excalidraw/excalidraw/issues/new) so we can get things set up on our end first.

Translations will be available on the app if they exceed a certain threshold of completion (currently **85%**).

- [Setup](https://docs.excalidraw.com/docs/introduction/contributing#setup)
  - [Option 1 - Manual](https://docs.excalidraw.com/docs/introduction/contributing#option-1---manual)
  - [Option 2 - CodeSandbox](https://docs.excalidraw.com/docs/introduction/contributing#option-2---codesandbox)
- [Pull Request Guidelines](https://docs.excalidraw.com/docs/introduction/contributing#pull-request-guidelines)
  - [Title](https://docs.excalidraw.com/docs/introduction/contributing#title)
  - [Testing](https://docs.excalidraw.com/docs/introduction/contributing#testing)
- [Translating](https://docs.excalidraw.com/docs/introduction/contributing#translating)

## Excalidraw Utils
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#docusaurus_skipToContent_fallback)

On this page

# Utils

These are pure Javascript functions exported from the @excalidraw/excalidraw [`@excalidraw/excalidraw`](https://npmjs.com/@excalidraw/excalidraw). If you want to export your drawings in different formats eg `png`, `svg` and more you can check out [Export Utilities](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/API/utils/export). If you want to restore your drawings you can check out [Restore Utilities](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/API/utils/restore).

### serializeAsJSON [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#serializeasjson "Direct link to heading")

Takes the scene elements and state and returns a JSON string. `Deleted` elements as well as most properties from `AppState` are removed from the resulting JSON. (see [`serializeAsJSON()`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/json.ts#L42) source for details).

If you want to overwrite the `source` field in the `JSON` string, you can set `window.EXCALIDRAW_EXPORT_SOURCE` to the desired value.

**_Signature_**

```codeBlockLines_e6Vv
serializeAsJSON({
  elements: ExcalidrawElement[],
  appState: AppState,
}): string
```

**How to use**

```codeBlockLines_e6Vv
import { serializeAsJSON } from "@excalidraw/excalidraw";

```

### serializeLibraryAsJSON [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#serializelibraryasjson "Direct link to heading")

Takes the `library` items and returns a `JSON` string.

If you want to overwrite the source field in the JSON string, you can set `window.EXCALIDRAW_EXPORT_SOURCE` to the desired value.

**_Signature_**

```codeBlockLines_e6Vv
serializeLibraryAsJSON( libraryItems: LibraryItems[])
```

**How to use**

```codeBlockLines_e6Vv
import { serializeLibraryAsJSON } from "@excalidraw/excalidraw";

```

#### isInvisiblySmallElement [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#isinvisiblysmallelement "Direct link to heading")

Returns `true` if element is invisibly small (e.g. width & height are zero).

**_Signature_**

```codeBlockLines_e6Vv
isInvisiblySmallElement(element:  ExcalidrawElement): boolean
```

**How to use**

```codeBlockLines_e6Vv
import { isInvisiblySmallElement } from "@excalidraw/excalidraw";

```

### loadFromBlob [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#loadfromblob "Direct link to heading")

This function loads the scene data from the blob (or file). If you pass `localAppState`, `localAppState` value will be preferred over the `appState` derived from `blob`. Throws if blob doesn't contain valid scene data.

**How to use**

```codeBlockLines_e6Vv
import { loadFromBlob } from "@excalidraw/excalidraw";

const scene = await loadFromBlob(file, null, null);
excalidrawAPI.updateScene(scene);

```

**Signature**

```codeBlockLines_e6Vv
loadFromBlob(
  blob: Blob,
  localAppState: AppState | null,
  localElements: ExcalidrawElement[] | null,
  fileHandle?: FileSystemHandle | null
) => Promise<RestoredDataState>
```

### loadLibraryFromBlob [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#loadlibraryfromblob "Direct link to heading")

This function loads the library from the blob. Additonally takes `defaultStatus` param which sets the default status for library item if not present, defaults to `unpublished`.

**How to use**

```codeBlockLines_e6Vv
import { loadLibraryFromBlob } from "@excalidraw/excalidraw";

```

**_Signature_**

```codeBlockLines_e6Vv
loadLibraryFromBlob(blob: Blob, defaultStatus: "published" | "unpublished")
```

### loadSceneOrLibraryFromBlob [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#loadsceneorlibraryfromblob "Direct link to heading")

This function loads either scene or library data from the supplied blob. If the blob contains scene data, and you pass `localAppState`, `localAppState` value will be preferred over the `appState` derived from `blob`.

caution

Throws if blob doesn't contain valid `scene` data or `library` data.

**How to use**

```codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm
import { loadSceneOrLibraryFromBlob, MIME_TYPES } from "@excalidraw/excalidraw";

const contents = await loadSceneOrLibraryFromBlob(file, null, null);
if (contents.type === MIME_TYPES.excalidraw) {
  excalidrawAPI.updateScene(contents.data);
} else if (contents.type === MIME_TYPES.excalidrawlib) {
  excalidrawAPI.updateLibrary(contents.data);
}

```

**_Signature_**

```codeBlockLines_e6Vv
loadSceneOrLibraryFromBlob(
  blob: Blob,
  localAppState: AppState | null,
  localElements: ExcalidrawElement[] | null,
  fileHandle?: FileSystemHandle | null
) => Promise<{ type: string, data: RestoredDataState | ImportedLibraryState}>
```

### getFreeDrawSvgPath [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#getfreedrawsvgpath "Direct link to heading")

This function returns the `free draw` svg path for the element.

**How to use**

```codeBlockLines_e6Vv
import { getFreeDrawSvgPath } from "@excalidraw/excalidraw";

```

**Signature**

```codeBlockLines_e6Vv
getFreeDrawSvgPath(element: ExcalidrawFreeDrawElement)
```

### isLinearElement [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#islinearelement "Direct link to heading")

This function returns true if the element is `linear` type ( `arrow` \| `line`) else returns `false`.

**How to use**

```codeBlockLines_e6Vv
import { isLinearElement } from "@excalidraw/excalidraw";

```

**Signature**

```codeBlockLines_e6Vv
isLinearElement(elementType?: ExcalidrawElement): boolean
```

### getNonDeletedElements [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#getnondeletedelements "Direct link to heading")

This function returns an array of `deleted` elements.

**How to use**

```codeBlockLines_e6Vv
import { getNonDeletedElements } from "@excalidraw/excalidraw";

```

**Signature**

```codeBlockLines_e6Vv
getNonDeletedElements(elements: readonly ExcalidrawElement[]): as readonly NonDeletedExcalidrawElement[]
```

### mergeLibraryItems [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#mergelibraryitems "Direct link to heading")

This function merges two `LibraryItems` arrays, where unique items from `otherItems` are sorted first in the returned array.

```codeBlockLines_e6Vv
import { mergeLibraryItems } from "@excalidraw/excalidraw";

```

**_Signature_**

```codeBlockLines_e6Vv
mergeLibraryItems(
  localItems: LibraryItems,
  otherItems: LibraryItems
): LibraryItems
```

### parseLibraryTokensFromUrl [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#parselibrarytokensfromurl "Direct link to heading")

Parses library parameters from URL if present (expects the `#addLibrary` hash key), and returns an object with the `libraryUrl` and `idToken`. Returns `null` if `#addLibrary` hash key not found.

**How to use**

```codeBlockLines_e6Vv
import { parseLibraryTokensFromUrl } from "@excalidraw/excalidraw";

```

**Signature**

```codeBlockLines_e6Vv
parseLibraryTokensFromUrl(): {
    libraryUrl: string;
    idToken: string | null;
} | null

```

### useHandleLibrary [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#usehandlelibrary "Direct link to heading")

A hook that automatically imports library from url if `#addLibrary` hash key exists on initial load, or when it changes during the editing session (e.g. when a user installs a new library), and handles initial library load if `getInitialLibraryItems` getter is supplied.

**How to use**

```codeBlockLines_e6Vv
import { useHandleLibrary } from "@excalidraw/excalidraw";

export const App = () => {
  // ...
  useHandleLibrary({ excalidrawAPI });
};

```

**Signature**

```codeBlockLines_e6Vv
useHandleLibrary(opts: {
  excalidrawAPI: ExcalidrawAPI,
  getInitialLibraryItems?: () => LibraryItemsSource
});
```

In the future, we will be adding support for handling `library` persistence to `browser storage` (or elsewhere).

### getSceneVersion [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#getsceneversion "Direct link to heading")

This function returns the current `scene` version.

**_Signature_**

```codeBlockLines_e6Vv
getSceneVersion(elements:  ExcalidrawElement[])
```

**How to use**

```codeBlockLines_e6Vv
import { getSceneVersion } from "@excalidraw/excalidraw";

```

### sceneCoordsToViewportCoords [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#scenecoordstoviewportcoords "Direct link to heading")

This function returns equivalent `viewport` coords for the provided `scene` coords in params.

```codeBlockLines_e6Vv
import { sceneCoordsToViewportCoords } from "@excalidraw/excalidraw";

```

**_Signature_**

```codeBlockLines_e6Vv
sceneCoordsToViewportCoords({ sceneX: number, sceneY: number },
  appState: AppState
): { x: number, y: number }
```

### viewportCoordsToSceneCoords [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#viewportcoordstoscenecoords "Direct link to heading")

This function returns equivalent `scene` coords for the provided `viewport` coords in params.

```codeBlockLines_e6Vv
import { viewportCoordsToSceneCoords } from "@excalidraw/excalidraw";

```

**_Signature_**

```codeBlockLines_e6Vv
viewportCoordsToSceneCoords({ clientX: number, clientY: number },
  appState: AppState
): {x: number, y: number}
```

### useDevice [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#usedevice "Direct link to heading")

This hook can be used to check the type of device which is being used. It can only be used inside the `children` of `Excalidraw` component.

Open the `main menu` in the below example to view the footer.

Live Editor

```

const MobileFooter = ({}) => {
  const device = useDevice();
  if (device.editor.isMobile) {
    return (
      <Footer>
        <button
          className="custom-footer"
          style={{ marginLeft: "20px", height: "2rem" }}
          onClick={() => alert("This is custom footer in mobile menu")}
        >
          custom footer
        </button>
      </Footer>
    );
  }
  return null;
};
const App = () => (
  <div style={{ height: "400px" }}>
    <Excalidraw>
      <MainMenu>
        <MainMenu.Item> Item1 </MainMenu.Item>
        <MainMenu.Item> Item 2 </MainMenu.Item>
        <MobileFooter />
      </MainMenu>
    </Excalidraw>
  </div>
);

// Need to render when code is span across multiple components
// in Live Code blocks editor
render(<App />);
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

The `device` has the following `attributes`, some grouped into `viewport` and `editor` objects, per context.

| Name | Type | Description |
| --- | --- | --- |
| `viewport.isMobile` | `boolean` | Set to `true` when viewport is in `mobile` breakpoint |
| `viewport.isLandscape` | `boolean` | Set to `true` when the viewport is in `landscape` mode |
| `editor.canFitSidebar` | `boolean` | Set to `true` if there's enough space to fit the `sidebar` |
| `editor.isMobile` | `boolean` | Set to `true` when editor container is in `mobile` breakpoint |
| `isTouchScreen` | `boolean` | Set to `true` for `touch` when touch event detected |

### i18n [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#i18n "Direct link to heading")

To help with localization, we export the following.

| name | type |
| --- | --- |
| `defaultLang` | `string` |
| `languages` | [`Language[]`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/i18n.ts#L15) |
| `useI18n` | [`() => { langCode, t }`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/i18n.ts#L15) |

```codeBlockLines_e6Vv
import { defaultLang, languages, useI18n } from "@excalidraw/excalidraw";

```

#### defaultLang [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#defaultlang "Direct link to heading")

Default language code, `en`.

#### languages [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#languages "Direct link to heading")

List of supported language codes. You can pass any of these to `Excalidraw`'s [`langCode` prop](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/#langcode).

#### useI18n [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#usei18n "Direct link to heading")

A hook that returns the current language code and translation helper function. You can use this to translate strings in the components you render as children of `<Excalidraw>`.

Live Editor

```

function App() {
  const { t } = useI18n();
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw>
        <button
          style={{ position: "absolute", zIndex: 10, height: "2rem" }}
          onClick={() => window.alert(t("labels.madeWithExcalidraw"))}
        >
          {t("buttons.confirm")}
        </button>
      </Excalidraw>
    </div>
  );
}
```

Result

```
Error: Missing Provider from createIsolation
```

### getCommonBounds [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#getcommonbounds "Direct link to heading")

This util can be used to get the common bounds of the passed elements.

**_Signature_**

```codeBlockLines_e6Vv
getCommonBounds(
  elements: readonly ExcalidrawElement[]
): readonly [\
  minX: number,\
  minY: number,\
  maxX: number,\
  maxY: number,\
]

```

**_How to use_**

```codeBlockLines_e6Vv
import { getCommonBounds } from "@excalidraw/excalidraw";

```

### elementsOverlappingBBox [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#elementsoverlappingbbox "Direct link to heading")

To filter `elements` that are inside, overlap, or contain the `bounds` rectangle.

The bounds check is approximate and does not precisely follow the element's shape. You can also supply `errorMargin` which effectively makes the `bounds` larger by that amount.

This API has 3 `type` s of operation: `overlap`, `contain`, and `inside`:

- `overlap` \- filters elements that are overlapping or inside bounds.
- `contain` \- filters elements that are inside bounds or bounds inside elements.
- `inside` \- filters elements that are inside bounds.

**_Signature_**

```codeBlockLines_e6Vv
elementsOverlappingBBox(
  elements: readonly NonDeletedExcalidrawElement[];
  bounds: Bounds | ExcalidrawElement;
  errorMargin?: number;
  type: "overlap" | "contain" | "inside";
): NonDeletedExcalidrawElement[];
```

**_How to use_**

```codeBlockLines_e6Vv
import { elementsOverlappingBBox } from "@excalidraw/excalidraw";

```

### isElementInsideBBox [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#iselementinsidebbox "Direct link to heading")

Lower-level API than `elementsOverlappingBBox` to check if a single `element` is inside `bounds`. If `eitherDirection=true`, returns `true` if `element` is fully inside `bounds` rectangle, or vice versa. When `false`, it returns `true` only for the former case.

**_Signature_**

```codeBlockLines_e6Vv
isElementInsideBBox(
  element: NonDeletedExcalidrawElement,
  bounds: Bounds,
  eitherDirection = false,
): boolean
```

**_How to use_**

```codeBlockLines_e6Vv
import { isElementInsideBBox } from "@excalidraw/excalidraw";

```

### elementPartiallyOverlapsWithOrContainsBBox [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils\#elementpartiallyoverlapswithorcontainsbbox "Direct link to heading")

Checks if `element` is overlapping the `bounds` rectangle, or is fully inside.

**_Signature_**

```codeBlockLines_e6Vv
elementPartiallyOverlapsWithOrContainsBBox(
  element: NonDeletedExcalidrawElement,
  bounds: Bounds,
): boolean
```

**_How to use_**

```codeBlockLines_e6Vv
import { elementPartiallyOverlapsWithOrContainsBBox } from "@excalidraw/excalidraw";

```

- [serializeAsJSON](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#serializeasjson)
- [serializeLibraryAsJSON](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#serializelibraryasjson)
  - [isInvisiblySmallElement](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#isinvisiblysmallelement)
- [loadFromBlob](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#loadfromblob)
- [loadLibraryFromBlob](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#loadlibraryfromblob)
- [loadSceneOrLibraryFromBlob](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#loadsceneorlibraryfromblob)
- [getFreeDrawSvgPath](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#getfreedrawsvgpath)
- [isLinearElement](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#islinearelement)
- [getNonDeletedElements](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#getnondeletedelements)
- [mergeLibraryItems](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#mergelibraryitems)
- [parseLibraryTokensFromUrl](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#parselibrarytokensfromurl)
- [useHandleLibrary](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#usehandlelibrary)
- [getSceneVersion](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#getsceneversion)
- [sceneCoordsToViewportCoords](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#scenecoordstoviewportcoords)
- [viewportCoordsToSceneCoords](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#viewportcoordstoscenecoords)
- [useDevice](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#usedevice)
- [i18n](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#i18n)
  - [defaultLang](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#defaultlang)
  - [languages](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#languages)
  - [useI18n](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#usei18n)
- [getCommonBounds](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#getcommonbounds)
- [elementsOverlappingBBox](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#elementsoverlappingbbox)
- [isElementInsideBBox](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#iselementinsidebbox)
- [elementPartiallyOverlapsWithOrContainsBBox](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#elementpartiallyoverlapswithorcontainsbbox)

## Excalidraw Installation Guide
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/installation#docusaurus_skipToContent_fallback)

On this page

# Installation

**Excalidraw** is exported as a component to be directly embedded in your project.

Use `npm` or `yarn` to install the package.

```codeBlockLines_e6Vv
npm install react react-dom @excalidraw/excalidraw
# or
yarn add react react-dom @excalidraw/excalidraw

```

tip

**If you don't want to wait for the next stable release and try out the unreleased changes you can use `@excalidraw/excalidraw@next`.**

### Self-hosting fonts [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/installation\#self-hosting-fonts "Direct link to heading")

By default, Excalidraw will try to download all the used fonts from the [CDN](https://esm.run/@excalidraw/excalidraw/dist/prod).

For self-hosting purposes, you'll have to copy the content of the folder `node_modules/@excalidraw/excalidraw/dist/prod/fonts` to the path where your assets should be served from (i.e. `public/` directory in your project). In that case, you should also set `window.EXCALIDRAW_ASSET_PATH` to the very same path, i.e. `/` in case it's in the root:

```codeBlockLines_e6Vv
window.EXCALIDRAW_ASSET_PATH = "/";

```

or, if you serve your assets from the root of your CDN, you would do:

```codeBlockLines_e6Vv
// Vanilla
<head>
    <script>
        window.EXCALIDRAW_ASSET_PATH = "https://my.cdn.com/assets/";
    </script>
</head>

```

or, if you prefer the path to be dynamicly set based on the `location.origin`, you could do the following:

```codeBlockLines_e6Vv
// Next.js
<Script id="load-env-variables" strategy="beforeInteractive" >
    { `window["EXCALIDRAW_ASSET_PATH"] = location.origin;` } // or use just "/"!
</Script>

```

### Dimensions of Excalidraw [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/installation\#dimensions-of-excalidraw "Direct link to heading")

Excalidraw takes _100%_ of `width` and `height` of the containing block so make sure the container in which you render Excalidraw has non zero dimensions.

## Demo [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/installation\#demo "Direct link to heading")

Go to [CodeSandbox](https://codesandbox.io/p/sandbox/github/excalidraw/excalidraw/tree/master/examples/with-script-in-browser) example.

- [Self-hosting fonts](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/installation#self-hosting-fonts)
- [Dimensions of Excalidraw](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/installation#dimensions-of-excalidraw)
- [Demo](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/installation#demo)

## Excalidraw Development Guide
[Skip to main content](https://docs.excalidraw.com/docs/introduction/development#docusaurus_skipToContent_fallback)

On this page

# Development

## Code Sandbox [​](https://docs.excalidraw.com/docs/introduction/development\#code-sandbox "Direct link to heading")

- Go to [https://codesandbox.io/p/github/excalidraw/excalidraw](https://codesandbox.io/p/github/excalidraw/excalidraw)
  - You may need to sign in with GitHub and reload the page
- You can start coding instantly, and even send PRs from there!

## Local Installation [​](https://docs.excalidraw.com/docs/introduction/development\#local-installation "Direct link to heading")

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes.

### Requirements [​](https://docs.excalidraw.com/docs/introduction/development\#requirements "Direct link to heading")

- [Node.js](https://nodejs.org/en/)
- [Yarn](https://yarnpkg.com/getting-started/install) (v1 or v2.4.2+)
- [Git](https://git-scm.com/downloads)

### Clone the repo [​](https://docs.excalidraw.com/docs/introduction/development\#clone-the-repo "Direct link to heading")

```codeBlockLines_e6Vv
git clone https://github.com/excalidraw/excalidraw.git

```

### Install the dependencies [​](https://docs.excalidraw.com/docs/introduction/development\#install-the-dependencies "Direct link to heading")

```codeBlockLines_e6Vv
yarn

```

### Start the server [​](https://docs.excalidraw.com/docs/introduction/development\#start-the-server "Direct link to heading")

```codeBlockLines_e6Vv
yarn start

```

Now you can open [http://localhost:3000](http://localhost:3000/) and start coding in your favorite code editor.

## Collaboration [​](https://docs.excalidraw.com/docs/introduction/development\#collaboration "Direct link to heading")

For collaboration, you will need to set up [collab server](https://github.com/excalidraw/excalidraw-room) in local.

## Commands [​](https://docs.excalidraw.com/docs/introduction/development\#commands "Direct link to heading")

### Install the dependencies [​](https://docs.excalidraw.com/docs/introduction/development\#install-the-dependencies-1 "Direct link to heading")

```codeBlockLines_e6Vv
yarn

```

### Run the project [​](https://docs.excalidraw.com/docs/introduction/development\#run-the-project "Direct link to heading")

```codeBlockLines_e6Vv
yarn start

```

### Reformat all files with Prettier [​](https://docs.excalidraw.com/docs/introduction/development\#reformat-all-files-with-prettier "Direct link to heading")

```codeBlockLines_e6Vv
yarn fix

```

### Run tests [​](https://docs.excalidraw.com/docs/introduction/development\#run-tests "Direct link to heading")

```codeBlockLines_e6Vv
yarn test

```

### Update test snapshots [​](https://docs.excalidraw.com/docs/introduction/development\#update-test-snapshots "Direct link to heading")

```codeBlockLines_e6Vv
yarn test:update

```

### Test for formatting with Prettier [​](https://docs.excalidraw.com/docs/introduction/development\#test-for-formatting-with-prettier "Direct link to heading")

```codeBlockLines_e6Vv
yarn test:code

```

### Docker Compose [​](https://docs.excalidraw.com/docs/introduction/development\#docker-compose "Direct link to heading")

You can use docker-compose to work on Excalidraw locally if you don't want to setup a Node.js env.

```codeBlockLines_e6Vv
docker-compose up --build -d

```

## Self-hosting [​](https://docs.excalidraw.com/docs/introduction/development\#self-hosting "Direct link to heading")

We publish a Docker image with the Excalidraw client at [excalidraw/excalidraw](https://hub.docker.com/r/excalidraw/excalidraw). You can use it to self-host your own client under your own domain, on Kubernetes, AWS ECS, etc.

```codeBlockLines_e6Vv
docker build -t excalidraw/excalidraw .
docker run --rm -dit --name excalidraw -p 5000:80 excalidraw/excalidraw:latest

```

The Docker image is free of analytics and other tracking libraries.

**At the moment, self-hosting your own instance doesn't support sharing or collaboration features.**

We are working towards providing a full-fledged solution for self-hosting your own Excalidraw.

- [Code Sandbox](https://docs.excalidraw.com/docs/introduction/development#code-sandbox)
- [Local Installation](https://docs.excalidraw.com/docs/introduction/development#local-installation)
  - [Requirements](https://docs.excalidraw.com/docs/introduction/development#requirements)
  - [Clone the repo](https://docs.excalidraw.com/docs/introduction/development#clone-the-repo)
  - [Install the dependencies](https://docs.excalidraw.com/docs/introduction/development#install-the-dependencies)
  - [Start the server](https://docs.excalidraw.com/docs/introduction/development#start-the-server)
- [Collaboration](https://docs.excalidraw.com/docs/introduction/development#collaboration)
- [Commands](https://docs.excalidraw.com/docs/introduction/development#commands)
  - [Install the dependencies](https://docs.excalidraw.com/docs/introduction/development#install-the-dependencies-1)
  - [Run the project](https://docs.excalidraw.com/docs/introduction/development#run-the-project)
  - [Reformat all files with Prettier](https://docs.excalidraw.com/docs/introduction/development#reformat-all-files-with-prettier)
  - [Run tests](https://docs.excalidraw.com/docs/introduction/development#run-tests)
  - [Update test snapshots](https://docs.excalidraw.com/docs/introduction/development#update-test-snapshots)
  - [Test for formatting with Prettier](https://docs.excalidraw.com/docs/introduction/development#test-for-formatting-with-prettier)
  - [Docker Compose](https://docs.excalidraw.com/docs/introduction/development#docker-compose)
- [Self-hosting](https://docs.excalidraw.com/docs/introduction/development#self-hosting)

## Frames Ordering Guide
[Skip to main content](https://docs.excalidraw.com/docs/codebase/frames#docusaurus_skipToContent_fallback)

On this page

# Frames

## Ordering [​](https://docs.excalidraw.com/docs/codebase/frames\#ordering "Direct link to heading")

Frames should be ordered where frame children come first, followed by the frame element itself:

```codeBlockLines_e6Vv
[\
  other_element,\
  frame1_child1,\
  frame1_child2,\
  frame1,\
  other_element,\
  frame2_child1,\
  frame2_child2,\
  frame2,\
  other_element,\
  ...\
]

```

If not ordered correctly, the editor will still function, but the elements may not be rendered and clipped correctly. Further, the renderer relies on this ordering for performance optimizations.

- [Ordering](https://docs.excalidraw.com/docs/codebase/frames#ordering)

## Excalidraw Export Utilities
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export#docusaurus_skipToContent_fallback)

On this page

info

We're working on much improved export utilities. Stay tuned!

### exportToCanvas [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export\#exporttocanvas "Direct link to heading")

**_Signature_**

```codeBlockLines_e6Vv
exportToCanvas({
  elements,
  appState
  getDimensions,
  files,
  exportPadding?: number;
}: ExportOpts
```

| Name | Type | Default | Description |
| --- | --- | --- | --- |
| `elements` | [Excalidraw Element \[\]](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L114) |  | The elements to be exported to canvas. |
| `appState` | [AppState](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/packages/utils.ts#L23) | [Default App State](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/appState.ts#L17) | The app state of the scene. |
| [`getDimensions`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export#getdimensions) | `function` | \_ | A function which returns the `width`, `height`, and optionally `scale` (defaults to `1`), with which canvas is to be exported. |
| `maxWidthOrHeight` | `number` | \_ | The maximum `width` or `height` of the exported image. If provided, `getDimensions` is ignored. |
| `files` | [BinaryFiles](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L59) | \_ | The files added to the scene. |
| `exportPadding` | `number` | `10` | The `padding` to be added on canvas. |

#### getDimensions [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export\#getdimensions "Direct link to heading")

```codeBlockLines_e6Vv
(width: number, height: number) => {
  width: number,
  height: number,
  scale?: number
}

```

A function which returns the `width`, `height`, and optionally `scale` (defaults to `1`), with which canvas is to be exported.

**How to use**

```codeBlockLines_e6Vv
import { exportToCanvas } from "@excalidraw/excalidraw";

```

This function returns the canvas with the exported elements, appState and dimensions.

Live Editor

```

function App() {
  const [canvasUrl, setCanvasUrl] = useState("");
  const [excalidrawAPI, setExcalidrawAPI] = useState(null);

  return  (
    <>
      <button
        className="custom-button"
        onClick={async () => {
          if (!excalidrawAPI) {
            return
          }
          const elements = excalidrawAPI.getSceneElements();
          if (!elements || !elements.length) {
            return
          }
          const canvas = await exportToCanvas({
            elements,
            appState: {
              ...initialData.appState,
              exportWithDarkMode: false,
            },
            files: excalidrawAPI.getFiles(),
            getDimensions: () => { return {width: 350, height: 350}}
          });
          const ctx = canvas.getContext("2d");
          ctx.font = "30px Virgil";
          ctx.strokeText("My custom text", 50, 60);
          setCanvasUrl(canvas.toDataURL());
        }}
      >
        Export to Canvas
      </button>
      <div className="export export-canvas">
        <img src={canvasUrl} alt="" />
      </div>
      <div style={{ height: "400px" }}>
        <Excalidraw excalidrawAPI={(api) => setExcalidrawAPI(api)}
/>
      </div>
    </>
  )
}
```

Result

Export to Canvas

![](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export)

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

### exportToBlob [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export\#exporttoblob "Direct link to heading")

**_Signature_**

```codeBlockLines_e6Vv
exportToBlob(
  opts: ExportOpts & {
  mimeType?: string,
  quality?: number,
  exportPadding?: number;
})
```

| Name | Type | Default | Description |
| --- | --- | --- | --- |
| `opts` | `object` | \_ | This param is passed to `exportToCanvas`. You can refer to [`exportToCanvas`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export#exporttocanvas) |
| `mimeType` | `string` | `image/png` | Indicates the image format. |
| `quality` | `number` | `0.92` | A value between `0` and `1` indicating the [image quality](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob#parameters). Applies only to `image/jpeg`/ `image/webp` MIME types. |
| `exportPadding` | `number` | `10` | The padding to be added on canvas. |

**How to use**

```codeBlockLines_e6Vv
import { exportToBlob } from "@excalidraw/excalidraw";

```

Returns a promise which resolves with a [blob](https://developer.mozilla.org/en-US/docs/Web/API/Blob). It internally uses [canvas.ToBlob](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob).

### exportToSvg [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export\#exporttosvg "Direct link to heading")

**_Signature_**

```codeBlockLines_e6Vv
exportToSvg({
  elements: ExcalidrawElement[],
  appState: AppState,
  exportPadding: number,
  metadata: string,
  files: BinaryFiles,
});
```

| Name | Type | Default | Description |
| --- | --- | --- | --- |
| elements | [Excalidraw Element \[\]](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L114) |  | The elements to exported as `svg ` |
| appState | [AppState](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L95) | [defaultAppState](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/appState.ts#L11) | The `appState` of the scene |
| exportPadding | number | 10 | The `padding` to be added on canvas |
| files | [BinaryFiles](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L64) | undefined | The `files` added to the scene. |

This function returns a promise which resolves to `svg` of the exported drawing.

### exportToClipboard [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export\#exporttoclipboard "Direct link to heading")

**_Signature_**

```codeBlockLines_e6Vv
exportToClipboard(
  opts: ExportOpts & {
  mimeType?: string,
  quality?: number;
  type: 'png' | 'svg' |'json'
})
```

| Name | Type | Default | Description |
| --- | --- | --- | --- |
| `opts` |  |  | This param is same as the params passed to `exportToCanvas`. You can refer to [`exportToCanvas`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export#exporttocanvas). |
| `mimeType` | `string` | `image/png` | Indicates the image format, this will be used when exporting as `png`. |
| `quality` | `number` | `0.92` | A value between `0` and `1` indicating the [image quality](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob#parameters). Applies only to `image/jpeg` / `image/webp` MIME types. This will be used when exporting as `png`. |
| `type` | 'png' \| 'svg' \| 'json' | \_ | This determines the format to which the scene data should be `exported`. |

**How to use**

```codeBlockLines_e6Vv
import { exportToClipboard } from "@excalidraw/excalidraw";

```

Copies the scene data in the specified format (determined by `type`) to clipboard.

### Additional attributes of appState for export\* APIs [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export\#additional-attributes-of-appstate-for-export-apis "Direct link to heading")

| Name | Type | Default | Description |
| --- | --- | --- | --- |
| `exportBackground` | `boolean` | `true` | Indicates whether `background` should be exported |
| `viewBackgroundColor` | `string` | `#fff` | The default background color |
| `exportWithDarkMode` | `boolean` | `false` | Indicates whether to export with `dark` mode |
| `exportEmbedScene` | `boolean` | `false` | Indicates whether scene data should be embedded in `svg/png`. This will increase the image size. |

- [exportToCanvas](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export#exporttocanvas)
  - [getDimensions](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export#getdimensions)
- [exportToBlob](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export#exporttoblob)
- [exportToSvg](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export#exporttosvg)
- [exportToClipboard](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export#exporttoclipboard)
- [Additional attributes of appState for export\* APIs](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/export#additional-attributes-of-appstate-for-export-apis)

## Mermaid to Excalidraw API
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api#docusaurus_skipToContent_fallback)

On this page

# API

At the moment the mermaid-to-excalidraw works in two steps. First, you call `parseMermaidToExcalidraw(mermaidSyntax)` on the mermaid diagram definition string, which resolves with elements in a skeleton format — a simplified excalidraw JSON format (docs coming soon). You then pass them to `convertToExcalidrawElements(elements)` to get the fully qualified excalidraw elements you can render in the editor.

The need for these two steps is due to the [@excalidraw/excalidraw](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/installation) being a **UMD** build so we currently cannot import the `convertToExcalidrawElements()` util alone, until we support a tree-shakeable **ESM** build.

## parseMermaidToExcalidraw [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api\#parsemermaidtoexcalidraw "Direct link to heading")

This API receives the mermaid syntax as the input, and resolves to skeleton Excalidraw elements. You will need to call `convertToExcalidraw` API to convert them to fully qualified elements that you can render in Excalidraw.

**Example**

```codeBlockLines_e6Vv
import { parseMermaidToExcalidraw } from "@excalidraw/mermaid-to-excalidraw";
import { convertToExcalidrawElements}  from "@excalidraw/excalidraw"
try {
  const { elements, files } = await parseMermaidToExcalidraw(mermaidSyntax: string, {
    fontSize: number,
  });
  const excalidrawElements = convertToExcalidrawElements(elements);
  // Render elements and files on Excalidraw
} catch (e) {
  // Parse error, displaying error message to users
}

```

## Supported Diagram Types [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api\#supported-diagram-types "Direct link to heading")

Currently only [flowcharts](https://mermaid.js.org/syntax/flowchart.html) are supported. Oother diagram types will be rendered as an image in Excalidraw.

### Flowchart [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api\#flowchart "Direct link to heading")

#### Excalidraw Regular Shapes [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api\#excalidraw-regular-shapes "Direct link to heading")

**Rectangles**, **Circle**, **Diamond**, and **Arrows** are fully supported in Excalidraw

```codeBlockLines_e6Vv
flowchart TD
  A[Christmas] -->|Get money| B(Go shopping)
  B --> C{Let me think}
  C -->|One| D[Laptop]
  C -->|Two| E[iPhone]
  C -->|Three| F[Car]

```

![](https://github.com/excalidraw/excalidraw/assets/11256141/c8ea84fc-e9fb-4652-9a12-154136d1a798)

```codeBlockLines_e6Vv
flowchart LR
  id1((Hello from Circle))

```

![](https://github.com/excalidraw/excalidraw/assets/11256141/6202a8b9-8aa7-451e-9478-4d8d75c0f2fa)

#### Subgraphs [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api\#subgraphs "Direct link to heading")

Subgraphs are grouped diagrams hence they are also supported in Excalidraw

```codeBlockLines_e6Vv
flowchart TB
  c1-->a2
  subgraph one
  a1-->a2
  end
  subgraph two
  b1-->b2
  end
  subgraph three
  c1-->c2
  end

```

![](https://github.com/excalidraw/excalidraw/assets/11256141/098bce52-8f93-437c-9a06-c6972e27c70a)

#### Unsupported shapes fallback to Rectangle [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api\#unsupported-shapes-fallback-to-rectangle "Direct link to heading")

**Subroutine**, **Cylindrical**, **Asymmetric**, **Hexagon**, **Parallelogram**, **Trapezoid** are not supported in Excalidraw hence they fallback to the closest shape **Rectangle**

```codeBlockLines_e6Vv
flowchart LR
  id1[[Subroutine fallback to Rectangle]]
  id2[(Cylindrical fallback to Rectangle)]
  id3>Asymmetric fallback to Rectangle]
  id4{{Hexagon fallback to Rectangle}}
  id5[/Parallelogram fallback to Rectangle /]
  id6[/Trapezoid fallback to Rectangle\]

```

The above shapes are not supported in Excalidraw hence they fallback to Rectangle

![](https://github.com/excalidraw/excalidraw/assets/11256141/cb269473-16c5-4c35-bd7a-d631d8cc5b47)

#### Markdown fallback to Regular text [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api\#markdown-fallback-to-regular-text "Direct link to heading")

Since we don't support wysiwyg text editor yet, hence [Markdown Strings](https://mermaid.js.org/syntax/flowchart.html#markdown-strings) will fallback to regular text.

```codeBlockLines_e6Vv
flowchart LR
  A("`Hello **World**`") --> B("`Whats **up** ?`")

```

![](https://github.com/excalidraw/excalidraw/assets/11256141/107bd428-9ab9-42d4-ba12-b1e29c8db478)

#### Basic FontAwesome fallback to text [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api\#basic-fontawesome-fallback-to-text "Direct link to heading")

The [FontAwesome](https://mermaid.js.org/syntax/flowchart.html#basic-support-for-fontawesome) icons aren't support so they won't be rendered in Excalidraw

```codeBlockLines_e6Vv
flowchart TD
  B["fab:fa-twitter for peace"]
  B-->C[fa:fa-ban forbidden]
  B-->E(A fa:fa-camera-retro perhaps?)

```

![](https://github.com/excalidraw/excalidraw/assets/11256141/7a693863-c3f9-42ff-b325-4b3f8303c7af)

#### Cross Arrow head fallback to Bar Arrow head [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api\#cross-arrow-head-fallback-to-bar-arrow-head "Direct link to heading")

```codeBlockLines_e6Vv
flowchart LR
  Start x--x Stop

```

![](https://github.com/excalidraw/excalidraw/assets/11256141/217dd1ad-7f4e-4c80-8c1c-03647b42d821)

## Unsupported Diagram Types [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api\#unsupported-diagram-types "Direct link to heading")

Currently only [flowcharts](https://mermaid.js.org/syntax/flowchart.html) are supported. All other diagram types will be rendered as an image in Excalidraw.

```codeBlockLines_e6Vv
erDiagram
  CUSTOMER ||--o{ ORDER : places
  ORDER ||--|{ LINE-ITEM : contains
  CUSTOMER }|..|{ DELIVERY-ADDRESS : uses

```

![](https://github.com/excalidraw/excalidraw/assets/11256141/c1d3fdb3-32ef-4bf3-a38a-02ac3d7d2cb9)

```codeBlockLines_e6Vv
gitGraph
  commit
  commit
  branch develop
  checkout develop
  commit
  commit
  checkout main
  merge develop
  commit
  commit

```

![](https://github.com/excalidraw/excalidraw/assets/11256141/e5dcec0b-d570-4eb4-b981-412a996aa96c)

- [parseMermaidToExcalidraw](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api#parsemermaidtoexcalidraw)
- [Supported Diagram Types](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api#supported-diagram-types)
  - [Flowchart](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api#flowchart)
    - [Excalidraw Regular Shapes](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api#excalidraw-regular-shapes)
    - [Subgraphs](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api#subgraphs)
    - [Unsupported shapes fallback to Rectangle](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api#unsupported-shapes-fallback-to-rectangle)
    - [Markdown fallback to Regular text](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api#markdown-fallback-to-regular-text)
    - [Basic FontAwesome fallback to text](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api#basic-fontawesome-fallback-to-text)
    - [Cross Arrow head fallback to Bar Arrow head](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api#cross-arrow-head-fallback-to-bar-arrow-head)
- [Unsupported Diagram Types](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/api#unsupported-diagram-types)

## Mermaid to Excalidraw Development
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/development#docusaurus_skipToContent_fallback)

On this page

# Development

This page relates to developing the `@excalidraw/mermaid-to-excalidraw` package itself.

## Setting up in Local [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/development\#setting-up-in-local "Direct link to heading")

To set up the library in local, follow the below steps 👇🏼

### Clone the Repository [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/development\#clone-the-repository "Direct link to heading")

Go to [@excalidraw/mermaid-to-excalidraw](https://github.com/excalidraw/mermaid-to-excalidraw) and clone the repository to your local.

```codeBlockLines_e6Vv
git clone git@github.com:excalidraw/mermaid-to-excalidraw.git

```

### Install the dependencies [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/development\#install-the-dependencies "Direct link to heading")

Using `npm`

```codeBlockLines_e6Vv
npm install @excalidraw/mermaid-to-excalidraw

```

Using `yarn`

```codeBlockLines_e6Vv
yarn add @excalidraw/mermaid-to-excalidraw

```

### Run the playground server [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/development\#run-the-playground-server "Direct link to heading")

```codeBlockLines_e6Vv
yarn start

```

This will start the playground server in port `1234` and you start playing with the playground.

## Creating a test release [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/development\#creating-a-test-release "Direct link to heading")

We will soon simplify creating release via commenting on GitHub PR similar till then you can create a release by following the below steps

1. Create the build

```codeBlockLines_e6Vv
yarn build

```

This will create the dist folder which we need to publish next.

2. Publish the library

Update the package name and version in [package.json](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/package.json) and run the below command to publish it

```codeBlockLines_e6Vv
yarn publish

```

And thats all your test release is successfully created 🎉

- [Setting up in Local](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/development#setting-up-in-local)
  - [Clone the Repository](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/development#clone-the-repository)
  - [Install the dependencies](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/development#install-the-dependencies)
  - [Run the playground server](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/development#run-the-playground-server)
- [Creating a test release](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/development#creating-a-test-release)

## Mermaid to Excalidraw
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/installation#docusaurus_skipToContent_fallback)

On this page

# Installation

`@excalidraw/mermaid-to-excalidraw` is published to npm. This library is used in [excalidraw](https://excalidraw.com/) to transform mermaid syntax to Excalidraw diagrams.

Using `npm`

```codeBlockLines_e6Vv
npm install @excalidraw/mermaid-to-excalidraw

```

Using `yarn`

```codeBlockLines_e6Vv
yarn add @excalidraw/mermaid-to-excalidraw

```

## Usage [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/installation\#usage "Direct link to heading")

Once the library is installed, its ready to use.

```codeBlockLines_e6Vv
import { parseMermaidToExcalidraw } from "@excalidraw/mermaid-to-excalidraw";
import { convertToExcalidrawElements}  from "@excalidraw/excalidraw"

try {
  const { elements, files } = await parseMermaid(diagramDefinition, {
    fontSize: DEFAULT_FONT_SIZE,
  });
  // currently the elements returned from the parser are in a "skeleton" format
  // which we need to convert to fully qualified excalidraw elements first
  const excalidrawElements = convertToExcalidrawElements(elements);

  // Render elements and files on Excalidraw
} catch (e) {
  // Error handling
}

```

## Playground [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/installation\#playground "Direct link to heading")

Try it out [here](https://mermaid-to-excalidraw.vercel.app/)

- [Usage](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/installation#usage)
- [Playground](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/installation#playground)

## Excalidraw UI Components
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components#docusaurus_skipToContent_fallback)

# `<Excalidraw/>` children

We expose several components you can render as children of the `<Excalidraw/>` component to customize the UI.

info

We have only recently started migrating to this type of component API. Some UI components are still using render props, and some UI customization isn't supported yet (such as the toolbar or the element properties panel). Stay tuned for more updates!

Below are the currently supported components:

- [MainMenu](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu)
- [WelcomeScreen](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen)
- [Sidebar](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar)
- [Footer](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/footer)
- [LiveCollaborationTrigger](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/live-collaboration-trigger)

## Excalidraw Codebase Overview
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase#docusaurus_skipToContent_fallback)

# Codebase

The Codebase is divided into 2 Sections

- [How Parser Works under the hood](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser) \- If you are interested in understanding and deep diving into inner workings of the Parser, then make sure to checkout this section.

- [Adding a new diagram type](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/new-diagram-type) \- If you want to help us make the mermaid to Excalidraw Parser more powerful, you will find all information in this section to do so.

## Excalidraw Element API
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#docusaurus_skipToContent_fallback)

On this page

# Creating Elements programmatically

We support a simplified API to make it easier to generate Excalidraw elements programmatically. This API is in beta and subject to change before stable. You can check the [PR](https://github.com/excalidraw/excalidraw/pull/6546) for more details.

For this purpose we introduced a new type [`ExcalidrawElementSkeleton`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L133). This is the simplified version of [`ExcalidrawElement`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L134) type with the minimum possible attributes so that creating elements programmatically is much easier (especially for cases like binding arrows or creating text containers).

The [`ExcalidrawElementSkeleton`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L133) can be converted to fully qualified Excalidraw elements by using [`convertToExcalidrawElements`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#converttoexcalidrawelements).

## convertToExcalidrawElements [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#converttoexcalidrawelements "Direct link to heading")

**_Signature_**

```codeBlockLines_e6Vv
convertToExcalidrawElements(
  elements: ExcalidrawElementSkeleton,
  opts?: { regenerateIds: boolean }
): ExcalidrawElement[]

```

| Name | Type | Default | Description |
| --- | --- | --- | --- |
| `elements` | [ExcalidrawElementSkeleton](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L137) |  | The Excalidraw element Skeleton which needs to be converted to Excalidraw elements. |
| `opts` | `{ regenerateIds: boolean }` | ` {regenerateIds: true}` | By default `id` will be regenerated for all the elements irrespective of whether you pass the `id` so if you don't want the ids to regenerated, you can set this attribute to `false`. |

**_How to use_**

```codeBlockLines_e6Vv
import { convertToExcalidrawElements } from "@excalidraw/excalidraw";

```

This function converts the Excalidraw Element Skeleton to excalidraw elements which could be then rendered on the canvas. Hence calling this function is necessary before passing it to APIs like [`initialData`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/initialdata), [`updateScene`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#updatescene) if you are using the Skeleton API

## Supported Features [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#supported-features "Direct link to heading")

### Rectangle, Ellipse, and Diamond [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#rectangle-ellipse-and-diamond "Direct link to heading")

To create these shapes you need to pass its `type` and `x` and `y` coordinates for position. The rest of the attributes are optional\_.

For the Skeleton API to work, `convertToExcalidrawElements` needs to be called before passing it to Excalidraw Component via initialData, updateScene or any such API.

Live Editor

```

function App() {
  const elements = convertToExcalidrawElements([\
    {\
      type: "rectangle",\
      x: 100,\
      y: 250,\
    },\
    {\
      type: "ellipse",\
      x: 250,\
      y: 250,\
    },\
    {\
      type: "diamond",\
      x: 380,\
      y: 250,\
    },\
  ]);
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw
        initialData={{
          elements,
          appState: { zenModeEnabled: true, viewBackgroundColor: "#a5d8ff" },
          scrollToContent: true,
        }}
      />
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

You can pass additional [`properties`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L27) as well to decorate the shapes.

info

You can copy the below test examples and replace the elements in the live editor above to test it out.

```codeBlockLines_e6Vv
convertToExcalidrawElements([\
  {\
    type: "rectangle",\
    x: 50,\
    y: 250,\
    width: 200,\
    height: 100,\
    backgroundColor: "#c0eb75",\
    strokeWidth: 2,\
  },\
  {\
    type: "ellipse",\
    x: 300,\
    y: 250,\
    width: 200,\
    height: 100,\
    backgroundColor: "#ffc9c9",\
    strokeStyle: "dotted",\
    fillStyle: "solid",\
    strokeWidth: 2,\
  },\
  {\
    type: "diamond",\
    x: 550,\
    y: 250,\
    width: 200,\
    height: 100,\
    backgroundColor: "#a5d8ff",\
    strokeColor: "#1971c2",\
    strokeStyle: "dashed",\
    fillStyle: "cross-hatch",\
    strokeWidth: 2,\
  },\
]);

```

![image](https://github.com/excalidraw/excalidraw/assets/11256141/70ca7063-88fb-434c-838a-cd466e1bc3c2)

### Text Element [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#text-element "Direct link to heading")

The `type`, `x`, `y` and `text` properties are required to create a text element, rest of the attributes are optional

```codeBlockLines_e6Vv
convertToExcalidrawElements([\
  {\
    type: "text",\
    x: 100,\
    y: 100,\
    text: "HELLO WORLD!",\
  },\
  {\
    type: "text",\
    x: 100,\
    y: 150,\
    text: "STYLED HELLO WORLD!",\
    fontSize: 20,\
    strokeColor: "#5f3dc4",\
  },\
]);

```

![image](https://github.com/excalidraw/excalidraw/assets/11256141/085c7ac3-7952-4f22-b9c3-6beb51438526)

### Lines and Arrows [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#lines-and-arrows "Direct link to heading")

The `type`, `x`, and `y` properties are required, rest of the attributes are optional

```codeBlockLines_e6Vv
convertToExcalidrawElements([\
  {\
    type: "arrow",\
    x: 100,\
    y: 20,\
  },\
  {\
    type: "line",\
    x: 100,\
    y: 60,\
  },\
]);

```

![image](https://github.com/excalidraw/excalidraw/assets/11256141/0c22a06b-b568-4ab5-9848-a5f0160f66a6)

#### With Addtional properties [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#with-addtional-properties "Direct link to heading")

```codeBlockLines_e6Vv
convertToExcalidrawElements([\
  {\
    type: "arrow",\
    x: 450,\
    y: 20,\
    startArrowhead: "dot",\
    endArrowhead: "triangle",\
    strokeColor: "#1971c2",\
    strokeWidth: 2,\
  },\
  {\
    type: "line",\
    x: 450,\
    y: 60,\
    strokeColor: "#2f9e44",\
    strokeWidth: 2,\
    strokeStyle: "dotted",\
  },\
]);

```

![image](https://github.com/excalidraw/excalidraw/assets/11256141/14f1bf3f-ad81-4096-8c1c-f35235084ec5)

### Text Containers [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#text-containers "Direct link to heading")

In addition to `type`, `x` and `y` properties, [`label`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L124C7-L130C59) property is required for text containers. The `text` property in `label` is required, rest of the attributes are optional.

If you don't provide the dimensions of container, we calculate it based of the label dimensions.

```codeBlockLines_e6Vv
convertToExcalidrawElements([\
  {\
    type: "rectangle",\
    x: 300,\
    y: 290,\
    label: {\
      text: "RECTANGLE TEXT CONTAINER",\
    },\
  },\
  {\
    type: "ellipse",\
    x: 500,\
    y: 100,\
    label: {\
      text: "ELLIPSE\n TEXT CONTAINER",\
    },\
  },\
  {\
    type: "diamond",\
    x: 100,\
    y: 100,\
    label: {\
      text: "DIAMOND\nTEXT CONTAINER",\
    },\
  },\
]);

```

![image](https://github.com/excalidraw/excalidraw/assets/11256141/1e2c7b5d-fcb4-4f86-946d-0bfb0e97d532)

#### With Additional properties [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#with-additional-properties "Direct link to heading")

```codeBlockLines_e6Vv
convertToExcalidrawElements([\
  {\
    type: "diamond",\
    x: -120,\
    y: 100,\
    width: 270,\
    backgroundColor: "#fff3bf",\
    strokeWidth: 2,\
    label: {\
      text: "STYLED DIAMOND TEXT CONTAINER",\
      strokeColor: "#099268",\
      fontSize: 20,\
    },\
  },\
  {\
    type: "rectangle",\
    x: 180,\
    y: 150,\
    width: 200,\
    strokeColor: "#c2255c",\
    label: {\
      text: "TOP LEFT ALIGNED RECTANGLE TEXT CONTAINER",\
      textAlign: "left",\
      verticalAlign: "top",\
      fontSize: 20,\
    },\
  },\
  {\
    type: "ellipse",\
    x: 400,\
    y: 130,\
    strokeColor: "#f08c00",\
    backgroundColor: "#ffec99",\
    width: 200,\
    label: {\
      text: "STYLED ELLIPSE TEXT CONTAINER",\
      strokeColor: "#c2255c",\
    },\
  },\
]);

```

![image](https://github.com/excalidraw/excalidraw/assets/11256141/f8123cd1-c9aa-452d-b96b-05c846c5030d)

### Labelled Arrows [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#labelled-arrows "Direct link to heading")

Similar to Text Containers, you can create labelled arrows as well.

```codeBlockLines_e6Vv
convertToExcalidrawElements([\
  {\
    type: "arrow",\
    x: 100,\
    y: 100,\
    label: {\
      text: "LABELED ARROW",\
    },\
  },\
  {\
    type: "arrow",\
    x: 100,\
    y: 200,\
    label: {\
      text: "STYLED LABELED ARROW",\
      strokeColor: "#099268",\
      fontSize: 20,\
    },\
  },\
  {\
    type: "arrow",\
    x: 100,\
    y: 300,\
    strokeColor: "#1098ad",\
    strokeWidth: 2,\
    label: {\
      text: "ANOTHER STYLED LABELLED ARROW",\
    },\
  },\
  {\
    type: "arrow",\
    x: 100,\
    y: 400,\
    strokeColor: "#1098ad",\
    strokeWidth: 2,\
    label: {\
      text: "ANOTHER STYLED LABELLED ARROW",\
      strokeColor: "#099268",\
    },\
  },\
]);

```

![image](https://github.com/excalidraw/excalidraw/assets/11256141/70635e9b-f1c8-4839-89e1-73b813abeb93)

### Arrow bindings [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#arrow-bindings "Direct link to heading")

To bind arrow to a shape you need to specify its [`start`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L86) and [`end`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L54) properties. You need to pass either `type` or `id` property in `start` and `end` properties, rest of the attributes are optional

```codeBlockLines_e6Vv
convertToExcalidrawElements([\
  {\
    type: "arrow",\
    x: 255,\
    y: 239,\
    label: {\
      text: "HELLO WORLD!!",\
    },\
    start: {\
      type: "rectangle",\
    },\
    end: {\
      type: "ellipse",\
    },\
  },\
]);

```

When position for `start` and `end ` properties are not specified, we compute it according to arrow position.

![image](https://github.com/excalidraw/excalidraw/assets/11256141/5aff09fd-b7e8-4c63-98be-da40b0698704)

```codeBlockLines_e6Vv
convertToExcalidrawElements([\
  {\
    type: "arrow",\
    x: 255,\
    y: 239,\
    label: {\
      text: "HELLO WORLD!!",\
    },\
    start: {\
      type: "text",\
      text: "HEYYYYY",\
    },\
    end: {\
      type: "text",\
      text: "WHATS UP ?",\
    },\
  },\
]);

```

![image](https://github.com/excalidraw/excalidraw/assets/11256141/2a9f03ac-e45c-4fbd-9be0-5d9f8c8e0343)

#### When passing `id` [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#when-passing-id "Direct link to heading")

Useful when you want to bind multiple arrows to one diagram / use some existing diagram

```codeBlockLines_e6Vv
convertToExcalidrawElements([\
  {\
    type: "ellipse",\
    id: "ellipse-1",\
    strokeColor: "#66a80f",\
    x: 390,\
    y: 356,\
    width: 150,\
    height: 150,\
    backgroundColor: "#d8f5a2",\
  },\
  {\
    type: "diamond",\
    id: "diamond-1",\
    strokeColor: "#9c36b5",\
    width: 100,\
    x: -30,\
    y: 380,\
  },\
  {\
    type: "arrow",\
    x: 100,\
    y: 440,\
    width: 295,\
    height: 35,\
    strokeColor: "#1864ab",\
    start: {\
      type: "rectangle",\
      width: 150,\
      height: 150,\
    },\
    end: {\
      id: "ellipse-1",\
    },\
  },\
  {\
    type: "arrow",\
    x: 60,\
    y: 420,\
    width: 330,\
    strokeColor: "#e67700",\
    start: {\
      id: "diamond-1",\
    },\
    end: {\
      id: "ellipse-1",\
    },\
  },\
]);

```

![image](https://github.com/excalidraw/excalidraw/assets/11256141/a8b047c8-2eed-4aea-82a2-e1e6bbddb8d4)

### Frames [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton\#frames "Direct link to heading")

To create a frame, you need to pass `type`, `children` (list of Excalidraw element ids). The rest of the attributes are optional.

```codeBlockLines_e6Vv
{
  type: "frame";
  children: readonly ExcalidrawElement["id"][];
  name?: string;
 } & Partial<ExcalidrawFrameElement>);

```

```codeBlockLines_e6Vv
convertToExcalidrawElements([\
  {\
    "type": "rectangle",\
    "x": 10,\
    "y": 10,\
    "strokeWidth": 2,\
    "id": "1"\
  },\
  {\
    "type": "diamond",\
    "x": 120,\
    "y": 20,\
    "backgroundColor": "#fff3bf",\
    "strokeWidth": 2,\
    "label": {\
      "text": "HELLO EXCALIDRAW",\
      "strokeColor": "#099268",\
      "fontSize": 30\
    },\
    "id": "2"\
  },\
  {\
    "type": "frame",\
    "children": ["1", "2"],\
    "name": "My frame"\
  }]
}

```

- [convertToExcalidrawElements](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#converttoexcalidrawelements)
- [Supported Features](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#supported-features)
  - [Rectangle, Ellipse, and Diamond](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#rectangle-ellipse-and-diamond)
  - [Text Element](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#text-element)
  - [Lines and Arrows](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#lines-and-arrows)
    - [With Addtional properties](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#with-addtional-properties)
  - [Text Containers](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#text-containers)
    - [With Additional properties](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#with-additional-properties)
  - [Labelled Arrows](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#labelled-arrows)
  - [Arrow bindings](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#arrow-bindings)
    - [When passing `id`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#when-passing-id)
  - [Frames](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/excalidraw-element-skeleton#frames)

## Excalidraw Footer Customization
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/footer#docusaurus_skipToContent_fallback)

# Footer

Earlier we were using `renderFooter` prop to render custom footer which was removed in [#5970](https://github.com/excalidraw/excalidraw/pull/5970). Now you can pass a `Footer` component instead to render the custom UI for footer.

You will need to import the `Footer` component from the package and wrap your component with the Footer component. The `Footer` should be a valid React Node.

**Usage**

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px"}}>
      <Excalidraw>
        <Footer>
          <button
            className="custom-footer"
            onClick={() => alert("This is dummy footer")}
          >
            custom footer
          </button>
        </Footer>
      </Excalidraw>
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

This will only work for `Desktop` devices.

For `mobile` you will need to render it inside the [MainMenu](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/footer#mainmenu). You can use the [`useDevice`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/footer#useDevice) hook to check the type of device, this will be available only inside the `children` of `Excalidraw` component.

Open the `Menu` in the below playground and you will see the `custom footer` rendered.

Live Editor

```

const MobileFooter = ({}) => {
  const device = useDevice();
  if (device.editor.isMobile) {
    return (
      <Footer>
        <button
          className="custom-footer"
          style= {{ marginLeft: '20px', height: '2rem'}}
          onClick={() => alert("This is custom footer in mobile menu")}
        >
          custom footer
        </button>
      </Footer>
    );
  }
  return null;
};

const App = () => (
  <div style={{ height: "400px" }}>
    <Excalidraw>
      <MainMenu>
        <MainMenu.Item> Item1 </MainMenu.Item>
        <MainMenu.Item> Item 2 </MainMenu.Item>
        <MobileFooter />
      </MainMenu>
    </Excalidraw>
  </div>
);

// Need to render when code is span across multiple components
// in Live Code blocks editor
render(<App />);
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

## Excalidraw UI Options
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#docusaurus_skipToContent_fallback)

On this page

# UIOptions

This prop can be used to customise UI of Excalidraw. Currently we support customising [`canvasActions`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#canvasactions), [`dockedSidebarBreakpoint`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#dockedsidebarbreakpoint) [`welcomeScreen`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#welcmescreen) and [`tools`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#tools).

```codeBlockLines_e6Vv
{
 canvasActions?: CanvasActions,
 dockedSidebarBreakpoint?: number,
 welcomeScreen?: boolean
}
```

## canvasActions [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options\#canvasactions "Direct link to heading")

This `prop` controls the visibility of the canvas actions inside the `menu`.

| Prop | Type | Default | Description |
| --- | --- | --- | --- |
| `changeViewBackgroundColor` | `boolean` | `true` | Indicates whether to show `Background color picker`. |
| `clearCanvas` | `boolean` | `true` | Indicates whether to show `Clear canvas` button. |
| `export` | `false` \| [`exportOpts`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#exportopts) | `object` | This prop allows to customize the UI inside the export dialog. By default it shows the `save file to disk`. For more details visit [`exportOpts`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#exportopts). |
| `loadScene` | `boolean` | `true` | Indicates whether to show `Load` button. |
| `saveToActiveFile` | `boolean` | `true` | Indicates whether to show `Save` button to save to current file. |
| `toggleTheme` | `boolean` \| `null` | `null` | Indicates whether to show `Theme toggle`. When defined as `boolean`, takes precedence over [`props.theme`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#theme) to show `Theme toggle`. |
| `saveAsImage` | `boolean` | `true` | Indicates whether to show `Save as image` button. |

Live Editor

```

function App() {
  const UIOptions = {
    canvasActions: {
      changeViewBackgroundColor: false,
      clearCanvas: false,
      loadScene: false,
    },
  };
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw UIOptions={UIOptions} />
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

### exportOpts [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options\#exportopts "Direct link to heading")

The below attributes can be set in `UIOptions.canvasActions.export` to customize the export dialog.

If `UIOptions.canvasActions.export` is `false` the export button will not be rendered.

| Prop | Type | Default | Description |
| --- | --- | --- | --- |
| `saveFileToDisk` | `boolean` | `true` | Indicates whether `save file to disk` button should be shown |
| `onExportToBackend` | `object` | \_ | This callback is triggered when the shareable-link button is clicked in the export dialog. The link button will only be shown if this callback is passed. |
| `renderCustomUI` | `object` | \_ | This callback should be supplied if you want to render custom UI in the export dialog. |

## dockedSidebarBreakpoint [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options\#dockedsidebarbreakpoint "Direct link to heading")

This prop indicates at what point should we break to a docked, permanent sidebar. If not passed it defaults to [`MQ_RIGHT_SIDEBAR_MAX_WIDTH_PORTRAIT`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/constants.ts#L161).

If the _width_ of the _excalidraw_ container exceeds _dockedSidebarBreakpoint_, the sidebar will be `dockable` and the button to `dock` the sidebar will be shown

If user choses to `dock` the sidebar, it will push the right part of the UI towards the left, making space for the sidebar as shown below.

![image](https://user-images.githubusercontent.com/11256141/174664866-c698c3fa-197b-43ff-956c-d79852c7b326.png)

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw UIOptions={{dockedSidebarBreakpoint: 200}}/>
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

## tools [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options\#tools "Direct link to heading")

This `prop` controls the visibility of the tools in the editor.
Currently you can control the visibility of `image` tool via this prop.

| Prop | Type | Default | Description |
| --- | --- | --- | --- |
| image | boolean | true | Decides whether `image` tool should be visible. |

- [canvasActions](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#canvasactions)
  - [exportOpts](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#exportopts)
- [dockedSidebarBreakpoint](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#dockedsidebarbreakpoint)
- [tools](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#tools)

## Excalidraw Sidebar Component
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar#docusaurus_skipToContent_fallback)

On this page

# Sidebar

The editor comes with a default sidebar on the right in LTR (Left to Right) mode which contains the library. You can also add your own custom sidebar(s) by rendering this component as a child of `<Excalidraw>`.

## Props [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar\#props "Direct link to heading")

| Prop | Type | Required | Description |
| --- | --- | --- | --- |
| `name` | `string` | Yes | Sidebar name that uniquely identifies it. |
| `children` | `React.ReactNode` | Yes | Content you want to render inside the sidebar. |
| `onStateChange` | `(state: AppState["openSidebar"]) => void` | No | Invoked on open/close or tab change. No need to act on this event, as the editor manages the sidebar open state on its own. |
| `onDock` | `(docked: boolean) => void` | No | Invoked when the user toggles the `dock` button. Passed the current docked state. |
| `docked` | `boolean` | No | Indicates whether the sidebar is `docked`. By default, the sidebar is `undocked`. If passed, the docking becomes controlled. |
| `className` | `string` | No |  |
| `style` | `React.CSSProperties` | No |  |

At minimum, each sidebar needs to have a unique `name` prop, and render some content inside it, which can be either composed from the exported sidebar sub-components, or custom elements.

Unless `docked={true}` is passed, the sidebar will close when the user clicks outside of it. It can also be closed using the close button in the header, if you render the `<Sidebar.Header>` component.

Further, if the sidebader doesn't comfortably fit in the editor, it won't be dockable. To decide the breakpoint for docking you can use [UIOptions.dockedSidebarBreakpoint](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#dockedsidebarbreakpoint).

To make your sidebar user-dockable, you need to supply `props.docked` (current docked state) alongside `props.onDock` callback (to listen for and handle docked state changes). The component doesn't track local state for the `docked` prop, so you need to manage it yourself.

## Sidebar.Header [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar\#sidebarheader "Direct link to heading")

| Prop | Type | Required | Description |
| --- | --- | --- | --- |
| `children` | `React.ReactNode` | No | Content you want to render inside the sidebar header next to the `close` / `dock` buttons. |
| `className` | `string` | No |  |

Renders a sidebar header which contains a close button, and a dock button (when applicable). You can also render custom content in addition.

Can be nested inside specific tabs, or rendered as direct child of `<Sidebar>` for the whole sidebar component.

## Sidebar.Tabs [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar\#sidebartabs "Direct link to heading")

| Prop | Type | Required | Description |
| --- | --- | --- | --- |
| `children` | `React.ReactNode` | No | Container for individual tabs. |

Sidebar may contain inner tabs. Each `<Sidebar.Tab>` must be rendered inside this `<Sidebar.Tabs>` container component.

## Sidebar.Tab [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar\#sidebartab "Direct link to heading")

| Prop | Type | Required | Description |
| --- | --- | --- | --- |
| `tab` | `string` | Yes | Unique tab name. |
| `children` | `React.ReactNode` | No | Tab content. |

Content of a given sidebar tab. It must be rendered inside `<Sidebar.Tabs>`.

## Sidebar.TabTriggers [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar\#sidebartabtriggers "Direct link to heading")

| Prop | Type | Required | Description |
| --- | --- | --- | --- |
| `children` | `React.ReactNode` | No | Container for individual tab triggers. |

Container component for tab trigger buttons to switch between tabs.

## Sidebar.TabTrigger [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar\#sidebartabtrigger "Direct link to heading")

| Prop | Type | Required | Description |
| --- | --- | --- | --- |
| `tab` | `string` | Yes | Tab name to toggle. |
| `children` | `React.ReactNode` | No | Tab trigger content, such as a label. |

A given tab trigger button that switches to a given sidebar tab. It must be rendered inside `<Sidebar.TabTriggers>`.

## Sidebar.Trigger [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar\#sidebartrigger "Direct link to heading")

| Prop | Type | Required | Description |
| --- | --- | --- | --- |
| `name` | `string` | Yes | Sidebar name the trigger will control. |
| `tab` | `string` | No | Optional tab to open. |
| `onToggle` | `(open: boolean) => void` | No | Callback invoked on toggle. |
| `title` | `string` | No | A11y title. |
| `children` | `React.ReactNode` | No | Content (usually label) you want to render inside the button. |
| `icon` | `JSX.Element` | No | Trigger icon if any. |
| `className` | `string` | No |  |
| `style` | `React.CSSProperties` | No |  |

You can use the [`ref.toggleSidebar({ name: "custom" })`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#toggleSidebar) api to control the sidebar, but we export a trigger button to make UI use cases easier.

## Example [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar\#example "Direct link to heading")

Live Editor

```

function App() {
  const [docked, setDocked] = useState(false);

  return (
    <div style={{ height: "580px" }}>
      <Excalidraw
        UIOptions={{
          // this effectively makes the sidebar dockable on any screen size,
          // ignoring if it fits or not
          dockedSidebarBreakpoint: 0,
        }}
      >
        <Sidebar name="custom" docked={docked} onDock={setDocked}>
          <Sidebar.Header />
          <Sidebar.Tabs style={{ padding: "0.5rem" }}>
            <Sidebar.Tab tab="one">Tab one!</Sidebar.Tab>
            <Sidebar.Tab tab="two">Tab two!</Sidebar.Tab>
            <Sidebar.TabTriggers>
              <Sidebar.TabTrigger tab="one">One</Sidebar.TabTrigger>
              <Sidebar.TabTrigger tab="two">Two</Sidebar.TabTrigger>
            </Sidebar.TabTriggers>
          </Sidebar.Tabs>
        </Sidebar>

        <Footer>
          <Sidebar.Trigger
            name="custom"
            tab="one"
            style={{
              marginLeft: "0.5rem",
              background: "#70b1ec",
              color: "white",
            }}
          >
            Toggle Custom Sidebar
          </Sidebar.Trigger>
        </Footer>
      </Excalidraw>
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

- [Props](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar#props)
- [Sidebar.Header](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar#sidebarheader)
- [Sidebar.Tabs](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar#sidebartabs)
- [Sidebar.Tab](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar#sidebartab)
- [Sidebar.TabTriggers](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar#sidebartabtriggers)
- [Sidebar.TabTrigger](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar#sidebartabtrigger)
- [Sidebar.Trigger](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar#sidebartrigger)
- [Example](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar#example)

## Mermaid to Excalidraw Parser
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser#docusaurus_skipToContent_fallback)

On this page

# How the Parser works under the hood ?

[This](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/index.ts) is the entry point of the library.

`parseMermaidToExcalidraw` function is the only function exposed which receives mermaid syntax as the input, parses the mermaid syntax and resolves to Excalidraw Skeleton.

Lets look at the high level overview at how the parse works 👇

![image](https://github.com/excalidraw/excalidraw/assets/11256141/8e060de7-b867-44ad-864b-0c1b24466b67)

Lets dive deeper into individual section now to understand better.

## Parsing Mermaid diagram [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser\#parsing-mermaid-diagram "Direct link to heading")

One of the dependencies of the library is [`mermaid`](https://www.npmjs.com/package/mermaid) library.
We need the mermaid diagram in some extractable format so we can parse it to Excalidraw Elements.

Parsing is broken into two steps

1. [`Rendering Mermaid to Svg`](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser#rendering-mermaid-to-svg) \- This helps in determining the position and dimensions of each element in the diagram

2. [`Parsing the mermaid syntax`](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser#parsing-the-mermaid-syntax) \- We also need to know how elements are connected which isn't possible with svg alone hence we also parse the mermaid syntax which helps in determining the connections and bindings between elements in the diagram.


### Rendering Mermaid to Svg [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser\#rendering-mermaid-to-svg "Direct link to heading")

![image](https://github.com/excalidraw/excalidraw/assets/11256141/2c24cf7b-f096-4c12-88db-55520de27558)

The [`mermaid`](https://www.npmjs.com/package/mermaid) library provides the API `mermaid.render` API which gives the output of the diagram in `svg`.

If the diagram isn't supported, this svg is converted to `dataURL` and can be rendered as an image in Excalidraw.

### Parsing the mermaid syntax [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser\#parsing-the-mermaid-syntax "Direct link to heading")

For this we first need to process the options along with mermaid defination for diagram provided by the user.

[`processMermaidTextWithOptions`](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/parseMermaid.ts#L13) takes the mermaid defination and options and returns the full defination including the mermaid [directives](https://mermaid.js.org/config/directives.html).

![image](https://github.com/excalidraw/excalidraw/assets/11256141/3a4825d8-9704-468c-a02f-7e507f4d5b7a)

Next we use mermaid api [getDiagramFromText](https://github.com/mermaid-js/mermaid/blob/00d06c7282a701849793680c1e97da1cfdfcce62/packages/mermaid/src/Diagram.ts#L80) to parse the full defination and get the [Diagram](https://github.com/mermaid-js/mermaid/blob/00d06c7282a701849793680c1e97da1cfdfcce62/packages/mermaid/src/Diagram.ts#L15) json from it.

```codeBlockLines_e6Vv
const diagram = await mermaid.mermaidAPI.getDiagramFromText(fullDefinition);

```

Next we write our own parser to parse this diagram.

### Parsing the Diagram [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser\#parsing-the-diagram "Direct link to heading")

For each diagram type, we need a parser as the result of every diagram would differ and dependinng on the data we have to write the parser. Since currently we support flowchart, so here is the [`parseMermaidFlowChartDiagram`](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/parser/flowchart.ts#L256) to parse the flowchart diagram.

If you want to understand how flowchart parser works, you can navigate to [Flowchart Parser](http://localhost:3003/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser/flowchart).

## Converting to ExcalidrawElementSkeleton [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser\#converting-to-excalidrawelementskeleton "Direct link to heading")

Now we have all the data, we just need to transform it to [ExcalidrawElementSkeleton](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L133C13-L133C38) API so it can be rendered in Excalidraw.

For this we have `converters` which takes the parsed mermaid data and gives back the Excalidraw Skeleton.
For Unsupported types, we have already mentioned above that we convert it to `dataURL` and return the ExcalidrawImageSkeleton.

For supported types, currently only flowchart, we have [flowchartConverter](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/converter/types/flowchart.ts#L24) which parses the data and converts to [ExcalidrawElementSkeleton](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L133C13-L133C38).

![image](https://github.com/excalidraw/excalidraw/assets/11256141/00226e9d-043d-4a08-989a-3ad9d2a574f1)

- [Parsing Mermaid diagram](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser#parsing-mermaid-diagram)
  - [Rendering Mermaid to Svg](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser#rendering-mermaid-to-svg)
  - [Parsing the mermaid syntax](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser#parsing-the-mermaid-syntax)
  - [Parsing the Diagram](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser#parsing-the-diagram)
- [Converting to ExcalidrawElementSkeleton](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser#converting-to-excalidrawelementskeleton)

## Excalidraw API Overview
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#docusaurus_skipToContent_fallback)

On this page

# excalidrawAPI

```codeBlockLines_e6Vv
(api: ExcalidrawAPI) => void;
```

Once the callback is triggered, you will need to store the api in state to access it later.

```codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm
export default function App() {
  const [excalidrawAPI, setExcalidrawAPI] = useState(null);
  return <Excalidraw excalidrawAPI={(api)=> setExcalidrawAPI(api)} />;
}

```

You can use this prop when you want to access some [Excalidraw APIs](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L616). We expose the below APIs 👇

| API | Signature | Usage |
| --- | --- | --- |
| [updateScene](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#updatescene) | `function` | updates the scene with the sceneData |
| [updateLibrary](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#updatelibrary) | `function` | updates the library |
| [addFiles](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#addfiles) | `function` | add files data to the appState |
| [resetScene](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#resetscene) | `function` | Resets the scene. If `resetLoadingState` is passed as true then it will also force set the loading state to false. |
| [getSceneElementsIncludingDeleted](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#getsceneelementsincludingdeleted) | `function` | Returns all the elements including the deleted in the scene |
| [getSceneElements](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#getsceneelements) | `function` | Returns all the elements excluding the deleted in the scene |
| [getAppState](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#getappstate) | `function` | Returns current appState |
| [history](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#history) | `object` | This is the history API. `history.clear()` will clear the history |
| [scrollToContent](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#scrolltocontent) | `function` | Scroll the nearest element out of the elements supplied to the center. Defaults to the elements on the scene. |
| [refresh](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#refresh) | `function` | Updates the offsets for the Excalidraw component so that the coordinates are computed correctly (for example the cursor position). |
| [setToast](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#settoast) | `function` | This API can be used to show the toast with custom message. |
| [id](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#id) | `string` | Unique ID for the excalidraw component. |
| [getFiles](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#getfiles) | `function` | This API can be used to get the files present in the scene. |
| [setActiveTool](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#setactivetool) | `function` | This API can be used to set the active tool |
| [setCursor](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#setcursor) | `function` | This API can be used to set customise the mouse cursor on the canvas |
| [resetCursor](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#resetcursor) | `function` | This API can be used to reset to default mouse cursor on the canvas |
| [toggleSidebar](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#toggleSidebar) | `function` | Toggles specific sidebar on/off |
| [onChange](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#onChange) | `function` | Subscribes to change events |
| [onPointerDown](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#onPointerDown) | `function` | Subscribes to `pointerdown` events |
| [onPointerUp](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#onPointerUp) | `function` | Subscribes to `pointerup` events |

The `Ref` support has been removed in v0.17.0 so if you are using refs, please update the integration to use the `excalidrawAPI`.

Additionally `ready` and `readyPromise` from the API have been discontinued. These APIs were found to be superfluous, and as part of the effort to streamline the APIs and maintain simplicity, they were removed in version v0.17.0.

## updateScene [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#updatescene "Direct link to heading")

```codeBlockLines_e6Vv
(scene: sceneData) => void
```

You can use this function to update the scene with the sceneData. It accepts the below attributes.

| Name | Type | Description |
| --- | --- | --- |
| `elements` | [`ImportedDataState["elements"]`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/types.ts#L38) | The `elements` to be updated in the scene |
| `appState` | [`ImportedDataState["appState"]`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/types.ts#L39) | The `appState` to be updated in the scene. |
| `collaborators` | `Map<string, Collaborator>` | The list of collaborators to be updated in the scene. |
| `captureUpdate` | [`CaptureUpdateAction`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/store.ts#L40) | Controls which updates should be captured by the `Store`. Captured updates are emmitted and listened to by other components, such as `History` for undo / redo purposes. |

Live Editor

```

function App() {
  const updateScene = () => {
    const sceneData = {
      elements: [\
        {\
          type: "rectangle",\
          version: 141,\
          versionNonce: 361174001,\
          isDeleted: false,\
          id: "oDVXy8D6rom3H1-LLH2-f",\
          fillStyle: "hachure",\
          strokeWidth: 1,\
          strokeStyle: "solid",\
          roughness: 1,\
          opacity: 100,\
          angle: 0,\
          x: 100.50390625,\
          y: 93.67578125,\
          strokeColor: "#c92a2a",\
          backgroundColor: "transparent",\
          width: 186.47265625,\
          height: 141.9765625,\
          seed: 1968410350,\
          groupIds: [],\
          boundElements: null,\
          locked: false,\
          link: null,\
          updated: 1,\
          roundness: {\
            type: 3,\
            value: 32,\
          },\
        },\
      ],
      appState: {
        viewBackgroundColor: "#edf2ff",
      },
      captureUpdate: CaptureUpdateAction.IMMEDIATELY,
    };
    excalidrawAPI.updateScene(sceneData);
  };
  const [excalidrawAPI, setExcalidrawAPI] = useState(null);
  return (
    <div style={{ height: "500px" }}>
      <p style={{ fontSize: "16px" }}> Click to update the scene</p>
      <button className="custom-button" onClick={updateScene}>
        Update Scene
      </button>
      <Excalidraw excalidrawAPI={(api) => setExcalidrawAPI(api)} />
    </div>
  );
}
```

Result

Click to update the scene

Update Scene

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

#### captureUpdate [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#captureupdate "Direct link to heading")

You can use the `captureUpdate` to influence undo / redo behaviour.

> **NOTE**: Some updates are not observed by the store / history - i.e. updates to `collaborators` object or parts of `AppState` which are not observed (not `ObservedAppState`). Such updates will never make it to the undo / redo stacks, regardless of the passed `captureUpdate` value.

|  | `captureUpdate` value | Notes |
| --- | --- | --- |
| _Immediately undoable_ | `CaptureUpdateAction.IMMEDIATELY` | Use for updates which should be captured. Should be used for most of the local updates. These updates will _immediately_ make it to the local undo / redo stacks. |
| _Eventually undoable_ | `CaptureUpdateAction.EVENTUALLY` | Use for updates which should not be captured immediately - likely exceptions which are part of some async multi-step process. Otherwise, all such updates would end up being captured with the next `CaptureUpdateAction.IMMEDIATELY` \- triggered either by the next `updateScene` or internally by the editor. These updates will _eventually_ make it to the local undo / redo stacks. |
| _Never undoable_ | `CaptureUpdateAction.NEVER` | Use for updates which should never be recorded, such as remote updates or scene initialization. These updates will _never_ make it to the local undo / redo stacks. |

### updateLibrary [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#updatelibrary "Direct link to heading")

```codeBlockLines_e6Vv
(opts: {
 libraryItems: LibraryItemsSource;
 merge?: boolean;
 prompt?: boolean;
 openLibraryMenu?: boolean;
 defaultStatus?: "unpublished" | "published";
 }) => Promise<LibraryItems>
```

You can use this function to update the library. It accepts the below attributes.

| Name | Type | Default | Description |
| --- | --- | --- | --- |
| `libraryItems` | [LibraryItemsSource](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L249) | \_ | The `libraryItems` to be replaced/merged with current library |
| `merge` | boolean | `false` | Whether to merge with existing library items. |
| `prompt` | boolean | `false` | Whether to prompt user for confirmation. |
| `openLibraryMenu` | boolean | `false` | Keep the library menu open after library is updated. |
| `defaultStatus` | `"unpublished" | "published"` | `"unpublished"` | Default library item's `status` if not present. |

Live Editor

```

function App() {
  const [excalidrawAPI, setExcalidrawAPI] = useState(null);

  useEffect(() => {
    if (!excalidrawAPI) {
      return;
    }
    // to open the library sidebar
    excalidrawAPI.updateScene({ appState: { openSidebar: "library" } });
  }, [excalidrawAPI]);

  return (
    <div style={{ height: "500px" }}>
      <p style={{ fontSize: "16px" }}> Click to update the library items</p>
      <button
        className="custom-button"
        onClick={() => {
          const libraryItems = [\
            {\
              status: "published",\
              id: "1",\
              created: 1,\
              elements: initialData.libraryItems[1],\
            },\
            {\
              status: "unpublished",\
              id: "2",\
              created: 2,\
              elements: initialData.libraryItems[1],\
            },\
          ];
          excalidrawAPI.updateLibrary({
            libraryItems,
            openLibraryMenu: true,
          });
        }}
      >
        Update Library
      </button>
      <Excalidraw
        excalidrawAPI={(api) => setExcalidrawAPI(api)}
        // initial data retrieved from https://github.com/excalidraw/excalidraw/blob/master/dev-docs/packages/excalidraw/initialData.js
        initialData={{
          libraryItems: initialData.libraryItems,
          appState: { openSidebar: "library" },
        }}
      />
    </div>
  );
}
```

Result

Click to update the library items

Update Library

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

### addFiles [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#addfiles "Direct link to heading")

```codeBlockLines_e6Vv
(files: BinaryFileData) => void
```

Adds supplied files data to the `appState.files` cache on top of existing files present in the cache.

## resetScene [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#resetscene "Direct link to heading")

```codeBlockLines_e6Vv
(opts?: { resetLoadingState: boolean }) => void

```

Resets the scene. If `resetLoadingState` is passed as true then it will also force set the loading state to false.

## getSceneElementsIncludingDeleted [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#getsceneelementsincludingdeleted "Direct link to heading")

```codeBlockLines_e6Vv
() => ExcalidrawElement[]
```

Returns all the elements including the deleted in the scene.

## getSceneElements [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#getsceneelements "Direct link to heading")

```codeBlockLines_e6Vv
() => NonDeleted<ExcalidrawElement[]>
```

Returns all the elements excluding the deleted in the scene

## getAppState [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#getappstate "Direct link to heading")

```codeBlockLines_e6Vv
() => AppState
```

Returns current appState.

## history [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#history "Direct link to heading")

```codeBlockLines_e6Vv
{
  clear: () => void
}

```

This is the history API. history.clear() will clear the history.

## scrollToContent [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#scrolltocontent "Direct link to heading")

```codeBlockLines_e6Vv
(
  target?: ExcalidrawElement | ExcalidrawElement[],
  opts?:
      | {
          fitToContent?: boolean;
          animate?: boolean;
          duration?: number;
        }
      | {
          fitToViewport?: boolean;
          viewportZoomFactor?: number;
          animate?: boolean;
          duration?: number;
        }
) => void

```

Scroll the nearest element out of the elements supplied to the center of the viewport. Defaults to the elements on the scene.

| Attribute | type | default | Description |
| --- | --- | --- | --- |
| target | [ExcalidrawElement](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L115) \| [ExcalidrawElement\[\]](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L115) | All scene elements | The element(s) to scroll to. |
| opts.fitToContent | boolean | false | Whether to fit the elements to viewport by automatically changing zoom as needed. Note that the zoom range is between 10%-100%. |
| opts.fitToViewport | boolean | false | Similar to fitToContent but the zoom range is not limited. If elements are smaller than the viewport, zoom will go above 100%. |
| opts.viewportZoomFactor | number | 0.7 | when fitToViewport=true, how much screen should the content cover, between 0.1 (10%) and 1 (100%) |
| opts.animate | boolean | false | Whether to animate between starting and ending position. Note that for larger scenes the animation may not be smooth due to performance issues. |
| opts.duration | number | 500 | Duration of the animation if `opts.animate` is `true`. |

## refresh [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#refresh "Direct link to heading")

```codeBlockLines_e6Vv
() => void

```

Updates the `offsets` for the `Excalidraw` component so that the coordinates are computed correctly (for example the cursor position).

You don't have to call this when the position is changed on page scroll or when the excalidraw container resizes (we handle that ourselves).

For any other cases if the position of excalidraw is updated (example due to scroll on parent container and not page scroll) you should call this API.

## setToast [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#settoast "Direct link to heading")

This API can be used to show the toast with custom message.

```codeBlockLines_e6Vv
({ message: string, closable?:boolean,duration?:number
  } | null) => void

```

| Attribute | type | Description |
| --- | --- | --- |
| message | string | The message to be shown on the toast. |
| closable | boolean | Indicates whether to show the closable button on toast to dismiss the toast. |
| duration | number | Determines the duration after which the toast should auto dismiss. To prevent autodimiss you can pass `Infinity`. |

To dismiss an existing toast you can simple pass `null`

```codeBlockLines_e6Vv
setToast(null);

```

## id [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#id "Direct link to heading")

The unique id of the excalidraw component. This can be used to identify the excalidraw component, for example importing the library items to the excalidraw component from where it was initiated when you have multiple excalidraw components rendered on the same page as shown in [multiple excalidraw demo](https://codesandbox.io/s/multiple-excalidraw-k1xx5).

## getFiles [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#getfiles "Direct link to heading")

```codeBlockLines_e6Vv
() => files
```

This API can be used to get the files present in the scene. It may contain files that aren't referenced by any element, so if you're persisting the files to a storage, you should compare them against stored elements.

## setActiveTool [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#setactivetool "Direct link to heading")

This API has the below signature. It sets the `tool` passed in param as the active tool.

```codeBlockLines_e6Vv
(
  tool: (
    | { type: ToolType }
    | { type: "custom"; customType: string }
  ) & { locked?: boolean },
) => {};

```

| Name | Type | Default | Description |
| --- | --- | --- | --- |
| `type` | [ToolType](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L91) | `selection` | The tool type which should be set as active tool |
| `locked` | `boolean` | `false` | Indicates whether the the active tool should be locked. It behaves the same way when using the `lock` tool in the editor interface |

## setCursor [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#setcursor "Direct link to heading")

This API can be used to customise the mouse cursor on the canvas and has the below signature. It sets the mouse cursor to the cursor passed in param.

```codeBlockLines_e6Vv
(cursor: string) => void

```

## toggleSidebar [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#togglesidebar "Direct link to heading")

```codeBlockLines_e6Vv
(opts: { name: string; tab?: string; force?: boolean }) => boolean;

```

This API can be used to toggle sidebar, optionally opening a specific sidebar tab. It returns whether the sidebar was toggled on or off. If the `force` flag passed, it will force the sidebar to be toggled either on/off.

This API is especially useful when you render a custom [`<Sidebar/>`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/sidebar), and you want to toggle it from your app based on a user action.

## resetCursor [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#resetcursor "Direct link to heading")

```codeBlockLines_e6Vv
() => void

```

This API can be used to reset to default mouse cursor.

## onChange [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#onchange "Direct link to heading")

```codeBlockLines_e6Vv
(
  callback: (
    elements: readonly ExcalidrawElement[],
    appState: AppState,
    files: BinaryFiles,
  ) => void
) => () => void

```

Subscribes to change events, similar to [`props.onChange`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onchange).

Returns an unsubscribe function.

## onPointerDown [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#onpointerdown "Direct link to heading")

```codeBlockLines_e6Vv
(
  callback: (
    activeTool: AppState["activeTool"],
    pointerDownState: PointerDownState,
    event: React.PointerEvent<HTMLElement>,
  ) => void,
) => () => void

```

Subscribes to canvas `pointerdown` events.

Returns an unsubscribe function.

## onPointerUp [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api\#onpointerup "Direct link to heading")

```codeBlockLines_e6Vv
(
  callback: (
    activeTool: AppState["activeTool"],
    pointerDownState: PointerDownState,
    event: PointerEvent,
  ) => void,
) => () => void

```

Subscribes to canvas `pointerup` events.

Returns an unsubscribe function.

- [updateScene](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#updatescene)
  - [captureUpdate](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#captureupdate)
  - [updateLibrary](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#updatelibrary)
  - [addFiles](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#addfiles)
- [resetScene](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#resetscene)
- [getSceneElementsIncludingDeleted](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#getsceneelementsincludingdeleted)
- [getSceneElements](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#getsceneelements)
- [getAppState](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#getappstate)
- [history](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#history)
- [scrollToContent](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#scrolltocontent)
- [refresh](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#refresh)
- [setToast](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#settoast)
- [id](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#id)
- [getFiles](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#getfiles)
- [setActiveTool](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#setactivetool)
- [setCursor](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#setcursor)
- [toggleSidebar](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#togglesidebar)
- [resetCursor](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#resetcursor)
- [onChange](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#onchange)
- [onPointerDown](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#onpointerdown)
- [onPointerUp](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#onpointerup)

## Welcome Screen Component
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#docusaurus_skipToContent_fallback)

On this page

# WelcomeScreen

When the canvas is empty, Excalidraw can show a welcome _splash_ screen with a logo, a few quick action items, and hints explaining what some of the UI buttons do. Once the user picks a tool, or has created an element on the canvas, the welcome screen will disappear.

You can enable this behavior by rendering a `WelcomeScreen` component like this:

Live Editor

```

function App() {
  return (
    <div style={{ height: "46rem" }}>
      <Excalidraw>
        <WelcomeScreen />
      </Excalidraw>
    </div>
  );
}
```

Result

Diagrams. Made. Simple.

Open

Ctrl+O

Help

?

Export, preferences, and more...

Pick a tool & Start drawing!

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

You can also customize the welcome screen by passing children to the `WelcomeScreen` component. See below.

## [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen\#welcomescreen-1 "Direct link to heading")

This is the main component. If you render it without any children, we will render the default welcome screen.

You can customize which welcome screen subcomponents are rendered by passing them as children.

The welcome screen consists of two main groups of subcomponents:

1. [WelcomeScreen.Center](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#welcomescreencenterlogo).
2. [WeelcomeScreen.Hints](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#welcomescreenhints).

![Excalidraw logo: Sketch hand-drawn like diagrams.](https://docs.excalidraw.com/assets/images/welcome-screen-overview-6ce7b8deb3bfaa4c2a38fd9c010e47a7.png)

### Center [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen\#center "Direct link to heading")

`<WelcomeScreen.Center/>` subcomponent is the center piece of the welcome screen, containing the `logo`, `heading`, and `menu`. All three subcomponents are optional, and you can render whatever you wish into the center component.

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw>
        <WelcomeScreen>
          <WelcomeScreen.Center>
            <WelcomeScreen.Center.Logo />
            <WelcomeScreen.Center.Heading>
              Welcome Screen Heading!
            </WelcomeScreen.Center.Heading>
            <WelcomeScreen.Center.Menu>
              <WelcomeScreen.Center.MenuItemLink href="https://github.com/excalidraw/excalidraw">
                Excalidraw GitHub
              </WelcomeScreen.Center.MenuItemLink>
              <WelcomeScreen.Center.MenuItemHelp />
            </WelcomeScreen.Center.Menu>
          </WelcomeScreen.Center>
        </WelcomeScreen>
      </Excalidraw>
    </div>
  );
}
```

Result

Welcome Screen Heading!

[Excalidraw GitHub](https://github.com/excalidraw/excalidraw)

Help

?

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

#### Logo [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen\#logo "Direct link to heading")

Use the `<WelcomeScreen.Center.Logo/>` to render a logo. By default it renders the Excalidraw logo and name. Supply `children` to customize.

#### Heading [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen\#heading "Direct link to heading")

Use the `<WelcomeScreen.Center.Heading/>` to render a heading below the logo. Supply `children` to change the default message.

#### Menu [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen\#menu "Direct link to heading")

`<WelcomeScreen.Center.Menu/>` is a wrapper component for the menu items. You can build your menu using the `<WelcomeScreen.Center.MenuItem>` and `<WelcomeScreen.Center.MenuItemLink>` components, render your own, or render one of the default menu items.

The default menu items are:

- `<WelcomeScreen.Center.MenuItemHelp/>` \- opens the help dialog.

- `<WelcomeScreen.Center.MenuItemLoadScene/>` \- open the load file dialog.

- `<WelcomeScreen.Center.MenuItemLiveCollaborationTrigger/>` \- intended to open the live collaboration dialog. Works similarly to [`<LiveCollaborationTrigger>`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/live-collaboration-trigger) and you must supply `onSelect()` handler to integrate with your collaboration implementation.


#### MenuItem [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen\#menuitem "Direct link to heading")

The `<WelcomeScreen.Center.MenuItem/>` component can be used to render a menu item.

| Prop | Type | Required | Default | Description |
| --- | --- | --- | --- | --- |
| `onSelect` | `function` | Yes |  | The handler is triggered when the item is selected. |
| `children` | `React.ReactNode` | Yes |  | The content of the menu item |
| `icon` | `JSX.Element` | No |  | The icon used in the menu item |
| `shortcut` | `string` | No |  | The keyboard shortcut (label-only, does not affect behavior) |

**WelcomeScreen.Center.MenuItemLink**

To render an external link in a menu item, you can use this component.

| Prop | Type | Required | Default | Description |
| --- | --- | --- | --- | --- |
| `href` | `string` | Yes |  | The `href` attribute to be added to the `anchor` element. |
| `children` | `React.ReactNode` | Yes |  | The content of the menu item |
| `icon` | `JSX.Element` | No |  | The icon used in the menu item |
| `shortcut` | `string` | No |  | The keyboard shortcut (label-only, does not affect behavior) |

### Hints [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen\#hints "Direct link to heading")

These `<WelcomeScreen.Hints.*>` subcomponents render the UI hints. Text of each hint can be customized by supplying `children`.

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw>
        <WelcomeScreen>
          <WelcomeScreen.Hints.ToolbarHint>
            <p> ToolBar Hints </p>
          </WelcomeScreen.Hints.ToolbarHint>
          <WelcomeScreen.Hints.MenuHint />
          <WelcomeScreen.Hints.HelpHint />
        </WelcomeScreen>
      </Excalidraw>
    </div>
  );
}
```

Result

Export, preferences, and more...

ToolBar Hints

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

#### MenuHint [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen\#menuhint "Direct link to heading")

`<WelcomeScreen.Hints.MenuHint>` hint subcomponent for the main menu. Supply `children` to customize the hint text.

#### ToolbarHint [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen\#toolbarhint "Direct link to heading")

`<WelcomeScreen.Hints.ToolbarHint>` hint subcomponent for the toolbar. Supply `children` to customize the hint text.

#### Help [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen\#help "Direct link to heading")

`<WelcomeScreen.Hints.Help>` hint subcomponent for the help dialog. Supply `children` to customize the hint text.

- [Center](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#center)
  - [Logo](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#logo)
  - [Heading](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#heading)
  - [Menu](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#menu)
  - [MenuItem](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#menuitem)
- [Hints](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#hints)
  - [MenuHint](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#menuhint)
  - [ToolbarHint](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#toolbarhint)
  - [Help](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/welcome-screen#help)

## Excalidraw MainMenu
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu#docusaurus_skipToContent_fallback)

On this page

# MainMenu

By default Excalidraw will render the `MainMenu` with default options. If you want to customise the `MainMenu`, you can pass the `MainMenu` component with the list options.

**Usage**

Live Editor

```

function App() {
  return (
    <div style={{ height: "300px" }}>
      <Excalidraw>
        <MainMenu>
          <MainMenu.Item onSelect={() => window.alert("Item1")}>
            Item1
          </MainMenu.Item>
          <MainMenu.Item onSelect={() => window.alert("Item2")}>
            Item 2
          </MainMenu.Item>
        </MainMenu>
      </Excalidraw>
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

### `<MainMenu>` [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu\#mainmenu-1 "Direct link to heading")

This is the `MainMenu` component. If you render it, you will need to populate the menu with your own items as we will not render any ourselves at that point.

| Prop | Type | Required | Default | Description |
| --- | --- | :-: | :-: | --- |
| `onSelect` | `function` | No | - | Triggered when any item is selected (via mouse). Calling `event.preventDefault()` will stop menu from closing. |

### MainMenu.Item [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu\#mainmenuitem "Direct link to heading")

To render an item, its recommended to use `MainMenu.Item`.

| Prop | Type | Required | Default | Description |
| --- | --- | :-: | :-: | --- |
| `onSelect` | `function` | Yes | - | Triggered when selected (via mouse). Calling `event.preventDefault()` will stop menu from closing. |
| `selected` | `boolean` | No | `false` | Whether item is active |
| `children` | `React.ReactNode` | Yes | - | The content of the menu item |
| `icon` | `JSX.Element` | No | - | The icon used in the menu item |
| `shortcut` | `string` | No | - | The shortcut to be shown for the menu item |

### MainMenu.ItemLink [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu\#mainmenuitemlink "Direct link to heading")

To render an item as a link, its recommended to use `MainMenu.ItemLink`.

**Usage**

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw>
        <MainMenu>
          <MainMenu.ItemLink href="https://google.com">
            Google
          </MainMenu.ItemLink>
          <MainMenu.ItemLink href="https://excalidraw.com">
            Excalidraw
          </MainMenu.ItemLink>
        </MainMenu>
      </Excalidraw>
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

| Prop | Type | Required | Default | Description |
| --- | --- | :-: | :-: | --- |
| `onSelect` | `function` | No | - | Triggered when selected (via mouse). Calling `event.preventDefault()` will stop menu from closing. |
| `selected` | `boolean` | No | `false` | Whether item is active |
| `href` | `string` | Yes | - | The `href` attribute to be added to the `anchor` element. |
| `children` | `React.ReactNode` | Yes | - | The content of the menu item |
| `icon` | `JSX.Element` | No | - | The icon used in the menu item |
| `shortcut` | `string` | No | - | The shortcut to be shown for the menu item |

### MainMenu.ItemCustom [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu\#mainmenuitemcustom "Direct link to heading")

To render a custom item, you can use `MainMenu.ItemCustom`.

**Usage**

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw>
        <MainMenu>
          <MainMenu.ItemCustom>
            <button
              style={{ height: "2rem" }}
              onClick={() => window.alert("custom menu item")}
            >
              custom item
            </button>
          </MainMenu.ItemCustom>
        </MainMenu>
      </Excalidraw>
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

| Prop | Type | Required | Default | Description |
| --- | --- | :-: | :-: | --- |
| `children` | `React.ReactNode` | Yes | - | The content of the menu item |

### MainMenu.DefaultItems [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu\#mainmenudefaultitems "Direct link to heading")

For the items which are shown in the menu in [excalidraw.com](https://excalidraw.com/), you can use `MainMenu.DefaultItems`

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw>
        <MainMenu>
          <MainMenu.DefaultItems.Socials />
          <MainMenu.DefaultItems.Export />
          <MainMenu.Item onSelect={() => window.alert("Item1")}>
            Item1
          </MainMenu.Item>
          <MainMenu.Item onSelect={() => window.alert("Item2")}>
            Item 2
          </MainMenu.Item>
        </MainMenu>
      </Excalidraw>
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

Here is a [complete list](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/components/main-menu/DefaultItems.tsx) of the default items.

### MainMenu.Group [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu\#mainmenugroup "Direct link to heading")

To Group item in the main menu, you can use `MainMenu.Group`

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw>
        <MainMenu>
          <MainMenu.Group title="Excalidraw items">
            <MainMenu.DefaultItems.Socials />
            <MainMenu.DefaultItems.Export />
          </MainMenu.Group>
          <MainMenu.Group title="custom items">
            <MainMenu.Item onSelect={() => window.alert("Item1")}>
              Item1
            </MainMenu.Item>
            <MainMenu.Item onSelect={() => window.alert("Item2")}>
              Item 2
            </MainMenu.Item>
          </MainMenu.Group>
        </MainMenu>
      </Excalidraw>
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

| Prop | Type | Required | Default | Description |
| --- | --- | :-: | :-: | --- |
| `children ` | `React.ReactNode` | Yes | - | The content of the `Menu Group` |

- [`<MainMenu>`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu#mainmenu-1)
- [MainMenu.Item](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu#mainmenuitem)
- [MainMenu.ItemLink](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu#mainmenuitemlink)
- [MainMenu.ItemCustom](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu#mainmenuitemcustom)
- [MainMenu.DefaultItems](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu#mainmenudefaultitems)
- [MainMenu.Group](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/main-menu#mainmenugroup)

## Flowchart Parser
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser/flowchart#docusaurus_skipToContent_fallback)

On this page

# Flowchart Parser

As mentioned in the previous section, we use [getDiagramFromText](https://github.com/mermaid-js/mermaid/blob/00d06c7282a701849793680c1e97da1cfdfcce62/packages/mermaid/src/Diagram.ts#L80) to parse the full defination and get the [Diagram](https://github.com/mermaid-js/mermaid/blob/00d06c7282a701849793680c1e97da1cfdfcce62/packages/mermaid/src/Diagram.ts#L15) json from it.

In this section we will be diving into how the [flowchart parser](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/parser/flowchart.ts#L256) works behind the scenes.

![image](https://github.com/excalidraw/excalidraw/assets/11256141/2a097bbb-64bf-49d6-bf7f-21172bdb538d)

We use `diagram.parser.yy` attribute to parse the data. If you want to know more about how the `diagram.parse.yy` attribute looks like, you can check it [here](https://github.com/mermaid-js/mermaid/blob/00d06c7282a701849793680c1e97da1cfdfcce62/packages/mermaid/src/diagrams/flowchart/flowDb.js#L768), however for scope of flowchart we are using **3** APIs from this parser to compute `vertices`, `edges` and `clusters` as we need these data to transform to [ExcalidrawElementSkeleton](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L133C13-L133C38).

For computing `vertices` and `edge` s lets consider the below svg generated by mermaid

![image](https://github.com/excalidraw/excalidraw/assets/11256141/d7013305-0b90-4fa0-a66e-b4f4604ad0b2)

## Computing the vertices [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser/flowchart\#computing-the-vertices "Direct link to heading")

We use `getVertices` API from `diagram.parse.yy` to get the vertices for a given flowchart.

Considering the same example this is the response from the API

```codeBlockLines_e6Vv
{
    "start": {
        "id": "start",
        "labelType": "text",
        "domId": "flowchart-start-1414",
        "styles": [],
        "classes": [],
        "text": "start",
        "props": {}
    },
    "stop": {
        "id": "stop",
        "labelType": "text",
        "domId": "flowchart-stop-1415",
        "styles": [],
        "classes": [],
        "text": "stop",
        "props": {}
    }
}

```

The dimensions and position is missing in this response and we need that to transform to [ExcalidrawElementSkeleton](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L133C13-L133C38), for this we have our own parser [`parseVertex`](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/parseMermaid.ts#L178) which takes the above response and uses the `svg` together to compute position, dimensions and cleans up the response.

The final output from `parseVertex` looks like 👇

```codeBlockLines_e6Vv
{
    "start": {
        "id": "start",
        "labelType": "text",
        "text": "start",
        "x": 0,
        "y": 0,
        "width": 67.796875,
        "height": 44,
        "containerStyle": {},
        "labelStyle": {}
    },
    "stop": {
        "id": "stop",
        "labelType": "text",
        "text": "stop",
        "x": 117.796875,
        "y": 0,
        "width": 62.3828125,
        "height": 44,
        "containerStyle": {},
        "labelStyle": {}
    }
}

```

## Computing the edges [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser/flowchart\#computing-the-edges "Direct link to heading")

The lines and arrows are considered as `edges` in mermaid as shown in the above diagram.
We use `getEdges` API from `diagram.parse.yy` to get the edges for a given flowchart.
Considering the same example this is the response from the API

```codeBlockLines_e6Vv
[\
    {\
        "start": "start",\
        "end": "stop",\
        "type": "arrow_point",\
        "text": "",\
        "labelType": "text",\
        "stroke": "normal",\
        "length": 1\
    }\
]

```

Similarly here the dimensions and position is missing and we compute that from the svg. The [`parseEdge`](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/parseMermaid.ts#L245) takes the above response along with `svg` and computes the position, dimensions and cleans up the response.

The final output from `parseEdge` looks like 👇

```codeBlockLines_e6Vv
[\
    {\
        "start": "start",\
        "end": "stop",\
        "type": "arrow_point",\
        "text": "",\
        "labelType": "text",\
        "stroke": "normal",\
        "startX": 67.797,\
        "startY": 22,\
        "endX": 117.797,\
        "endY": 22,\
        "reflectionPoints": [\
            {\
                "x": 67.797,\
                "y": 22\
            },\
            {\
                "x": 117.797,\
                "y": 22\
            }\
        ]\
    }\
]

```

## Computing the Subgraphs [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser/flowchart\#computing-the-subgraphs "Direct link to heading")

`Subgraphs` is collection of elements grouped together. The Subgraphs map to `grouping` elements in Excalidraw.

Lets consider the below example 👇

![image](https://github.com/excalidraw/excalidraw/assets/11256141/5243ce4c-beaa-43d2-812a-0577b0a574d7)

We use `getSubgraphs` API to get the subgraph data for a given flowchart.
Considering the same example this is the response from the API

```codeBlockLines_e6Vv
[\
    {\
        "id": "one",\
        "nodes": [\
                "flowchart-a2-1399",\
                "flowchart-a1-1400"\
        ],\
        "title": "one",\
        "classes": [],\
        "labelType": "text"\
    }\
]

```

For position and dimensions we use the svg to compute. The [`parseSubgraph`](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/parseMermaid.ts#L139) takes the above response along with `svg` and computes the position, dimensions and cleans up the response.

```codeBlockLines_e6Vv
[\
    {\
        "id": "one",\
        "nodes": [\
                "flowchart-a2-1399",\
                "flowchart-a1-1400"\
        ],\
        "title": "one",\
        "labelType": "text",\
        "nodeIds": [\
                "a2",\
                "a1"\
        ],\
        "x": 75.4921875,\
        "y": 0,\
        "width": 121.25,\
        "height": 188,\
        "text": "one"\
    }\
]

```

- [Computing the vertices](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser/flowchart#computing-the-vertices)
- [Computing the edges](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser/flowchart#computing-the-edges)
- [Computing the Subgraphs](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/parser/flowchart#computing-the-subgraphs)

## Live Collaboration Trigger
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/children-components/live-collaboration-trigger#docusaurus_skipToContent_fallback)

# LiveCollaborationTrigger

If you implement live collaboration support and want to expose the same UI button as on [excalidraw.com](https://excalidraw.com/), you can render the `<LiveCollaborationTrigger/>` component using the [renderTopRightUI](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#rendertoprightui) prop.

You'll need to supply `onSelect()` to handle opening of your collaboration dialog, but the button will display `appState.collaborators` count provided you have supplied it.

| Prop | Type | Required | Default | Description |
| --- | --- | --- | --- | --- |
| `onSelect` | `function` | Yes |  | Handler called when the user clicks on the button |
| `isCollaborating` | `boolean` | Yes | false | Whether live collaboration session is in effect. Modifies button style. |

Live Editor

```

function App() {
  const [excalidrawAPI, setExcalidrawAPI] = useState(null);
  const [isCollaborating, setIsCollaborating] = useState(false);
  return (
    <div style={{ height: "500px" }}>
      <p style={{ fontSize: "16px" }}>
        Selecting the checkbox to see the collaborator count
      </p>
      <label style={{ fontSize: "16px", fontWeight: "bold" }}>
        <input
          type="checkbox"
          checked={isCollaborating}
          onChange={() => {
            if (!isCollaborating) {
              const collaborators = new Map();
              collaborators.set("id1", {
                username: "Doremon",
                avatarUrl: "../../../../img/doremon.png",
              });
              collaborators.set("id3", {
                username: "Pika",
                avatarUrl: "../../../../img/pika.jpeg",
              });
              excalidrawAPI.updateScene({ collaborators });
            } else {
              excalidrawAPI.updateScene({
                collaborators: new Map(),
              });
            }
            setIsCollaborating(!isCollaborating);
          }}
        />
        Show Collaborators
      </label>
      <Excalidraw
        ref={(api) => setExcalidrawAPI(api)}
        renderTopRightUI={() => (
          <LiveCollaborationTrigger
            isCollaborating={isCollaborating}
            onSelect={() => {
              window.alert("You clicked on collab button");
              setIsCollaborating(true);
            }}
          />
        )}
      ></Excalidraw>
    </div>
  );
}
```

Result

Selecting the checkbox to see the collaborator count

Show Collaborators

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Share

Library

Drawing canvas

## New Diagram Type Guide
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/new-diagram-type#docusaurus_skipToContent_fallback)

On this page

# Adding a new Diagram Type

To add a new diagram type to the parser you can follow the below steps 👇

All the code for the parser resides in [`src`](https://github.com/excalidraw/mermaid-to-excalidraw/tree/master/src) folder and for playground resides in [`playground`](https://github.com/excalidraw/mermaid-to-excalidraw/tree/master/playground) folder.

lets run the playground server in local 👇

```codeBlockLines_e6Vv
yarn start

```

This will start the playground server in port `1234` and open it in browser so you start playing with the playground.

## Update Supported Diagram Types [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/new-diagram-type\#update-supported-diagram-types "Direct link to heading")

First step is to add the new diagram type in [`SUPPORTED_DIAGRAM_TYPES`](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/constants.ts#L2).

Once this is done the new diagram type won't be rendered as an image but start throwing error since we don't support parsing the data yet.

## Writing the Diagram Parser [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/new-diagram-type\#writing-the-diagram-parser "Direct link to heading")

Once the diagram type is added in previous step. Next step is to write the parser to parse the mermaid diagram.

For this create a file named `{{diagramType}}.ts` in [`src/parser`](https://github.com/excalidraw/mermaid-to-excalidraw/tree/master/src/parser) and write a function `parseMermaid{{diagramType}}Diagram` similar to how we [`parseMermaidFlowChartDiagram`](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/parser/flowchart.ts#L256) for parsing flowchart diagram.

The main aim of the parser is 👇

1. Determine how elements are connected in the diagram and thus finding arrow and text bindings.

For this you might have to dig in to the parser `diagram.parser.yy` and which attributes to parse for the new diagram.

2. Determine the position and dimensions of each element, for this would be using the `svg`

Once the parser is ready, lets start using it.

Add the diagram type in switch case in [`parseMermaid`](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/parseMermaid.ts#L97) and call the parser for the same.

## Writing the Excalidraw Skeleton Convertor [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/new-diagram-type\#writing-the-excalidraw-skeleton-convertor "Direct link to heading")

With the completion of previous step, we have all the data, now we need to transform it so to [ExcalidrawElementSkeleton](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L133) format.

Similar to [`FlowChartToExcalidrawSkeletonConverter`](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/src/converter/types/flowchart.ts#L24), you have to write the `{{diagramType}}ToExcalidrawSkeletonConverter` which parses the data received in previous step and returns the [ExcalidrawElementSkeleton](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/data/transform.ts#L133).

Thats it, you have added the new diagram type 🥳, now lets test it out!

## Updating the Playground [​](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/new-diagram-type\#updating-the-playground "Direct link to heading")

1. Create a file named `{{diagramType}}.ts` in [`playround/testcases/`](https://github.com/excalidraw/mermaid-to-excalidraw/tree/master/playground/testcases). For reference you can check [`flowchart.ts`](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/playground/testcases/flowchart.ts).

2. Incase the new diagram type added is present in [`unsupported.ts`](https://github.com/excalidraw/mermaid-to-excalidraw/blob/master/playground/testcases/unsupported.ts) then remove it from there.

3. Verify if the test cases are running fine in playground.


- [Update Supported Diagram Types](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/new-diagram-type#update-supported-diagram-types)
- [Writing the Diagram Parser](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/new-diagram-type#writing-the-diagram-parser)
- [Writing the Excalidraw Skeleton Convertor](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/new-diagram-type#writing-the-excalidraw-skeleton-convertor)
- [Updating the Playground](https://docs.excalidraw.com/docs/@excalidraw/mermaid-to-excalidraw/codebase/new-diagram-type#updating-the-playground)

## Excalidraw API Props
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#docusaurus_skipToContent_fallback)

On this page

# Props

All `props` are _optional_.

| Name | Type | Default | Description |
| --- | --- | --- | --- |
| [`initialData`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/initialdata) | `object` \| `null` \| `Promise<object | null>` | `null` | The initial data with which app loads. |
| [`excalidrawAPI`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api) | `function` | \_ | Callback triggered with the excalidraw api once rendered |
| [`isCollaborating`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#iscollaborating) | `boolean` | \_ | This indicates if the app is in `collaboration` mode |
| [`onChange`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onchange) | `function` | \_ | This callback is triggered whenever the component updates due to any change. This callback will receive the excalidraw `elements` and the current `app state`. |
| [`onPointerUpdate`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onpointerupdate) | `function` | \_ | Callback triggered when mouse pointer is updated. |
| [`onPointerDown`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onpointerdown) | `function` | \_ | This prop if passed gets triggered on pointer down events |
| [`onScrollChange`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onscrollchange) | `function` | \_ | This prop if passed gets triggered when scrolling the canvas. |
| [`onPaste`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onpaste) | `function` | \_ | Callback to be triggered if passed when something is pasted into the scene |
| [`onLibraryChange`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onlibrarychange) | `function` | \_ | The callback if supplied is triggered when the library is updated and receives the library items. |
| [`generateLinkForSelection`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#generatelinkforselection) | `function` | \_ | Allows you to override `url` generation when linking to Excalidraw elements. |
| [`onLinkOpen`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onlinkopen) | `function` | \_ | The callback if supplied is triggered when any link is opened. |
| [`langCode`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#langcode) | `string` | `en` | Language code string to be used in Excalidraw |
| [`renderTopRightUI`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/render-props#rendertoprightui) | `function` | \_ | Render function that renders custom UI in top right corner |
| [`renderCustomStats`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/render-props#rendercustomstats) | `function` | \_ | Render function that can be used to render custom stats on the stats dialog. |
| [`viewModeEnabled`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#viewmodeenabled) | `boolean` | \_ | This indicates if the app is in `view` mode. |
| [`zenModeEnabled`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#zenmodeenabled) | `boolean` | \_ | This indicates if the `zen` mode is enabled |
| [`gridModeEnabled`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#gridmodeenabled) | `boolean` | \_ | This indicates if the `grid` mode is enabled |
| [`libraryReturnUrl`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#libraryreturnurl) | `string` | \_ | What URL should [libraries.excalidraw.com](https://libraries.excalidraw.com/) be installed to |
| [`theme`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#theme) | `"light"` \| `"dark"` | `"light"` | The theme of the Excalidraw component |
| [`name`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#name) | `string` |  | Name of the drawing |
| [`UIOptions`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options) | `object` | [DEFAULT UI OPTIONS](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/constants.ts#L151) | To customise UI options. Currently we support customising [`canvas actions`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/ui-options#canvasactions) |
| [`detectScroll`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#detectscroll) | `boolean` | `true` | Indicates whether to update the offsets when nearest ancestor is scrolled. |
| [`handleKeyboardGlobally`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#handlekeyboardglobally) | `boolean` | `false` | Indicates whether to bind the keyboard events to document. |
| [`autoFocus`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#autofocus) | `boolean` | `false` | Indicates whether to focus the Excalidraw component on page load |
| [`generateIdForFile`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#generateidforfile) | `function` | \_ | Allows you to override `id` generation for files added on canvas |
| [`validateEmbeddable`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#validateembeddable) | `string[]` \| `boolean` \| `RegExp` \| `RegExp[]` \| `((link: string) => boolean | undefined)` | \_ | use for custom src url validation |
| [`renderEmbeddable`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/render-props#renderEmbeddable) | `function` | \_ | Render function that can override the built-in `<iframe>` |
| \[ `renderScrollbars`\] | `boolean` |  | `false` |

### Storing custom data on Excalidraw elements [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#storing-custom-data-on-excalidraw-elements "Direct link to heading")

Beyond attributes that Excalidraw elements already support, you can store `custom` data on each `element` in a `customData` object. The type of the attribute is [`Record<string, any>`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L66) and is optional.

You can use this to add any extra information you need to keep track of.

You can add `customData` to elements when passing them as [`initialData`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/initialdata), or using [`updateScene`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#updatescene) / [`updateLibrary`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/excalidraw-api#updatelibrary) afterwards.

```codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm
{
  type: "rectangle",
  id: "oDVXy8D6rom3H1-LLH2-f",
  customData: {customId: '162'},
}

```

### isCollaborating [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#iscollaborating "Direct link to heading")

This prop indicates if the app is in `collaboration` mode.

### onChange [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#onchange "Direct link to heading")

Every time component updates, this callback if passed will get triggered and has the below signature.

```codeBlockLines_e6Vv
(excalidrawElements, appState, files) => void;

```

1. `excalidrawElements`: Array of [excalidrawElements](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L114) in the scene.

2. `appState`: [AppState](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L95) of the scene.

3. `files`: The [BinaryFiles](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L64) which are added to the scene.


Here you can try saving the data to your backend or local storage for example.

### onPointerUpdate [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#onpointerupdate "Direct link to heading")

This callback is triggered when mouse pointer is updated.

```codeBlockLines_e6Vv
({ x, y }, button, pointersMap}) => void;

```

1. `{x, y}`: Pointer coordinates

2. `button`: The position of the button. This will be one of `["down", "up"]`

3. `pointersMap`: [`pointers`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L131) map of the scene

```codeBlockLines_e6Vv
(exportedElements, appState, canvas) => void

```

1. `exportedElements`: An array of [non deleted elements](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L87) which needs to be exported.
2. `appState`: [AppState](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L95) of the scene.
3. `canvas`: The `HTMLCanvasElement` of the scene.

### onPointerDown [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#onpointerdown "Direct link to heading")

This prop if passed will be triggered on pointer down events and has the below signature.

```codeBlockLines_e6Vv
(activeTool:  AppState["activeTool"], pointerDownState: PointerDownState) => void
```

### onScrollChange [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#onscrollchange "Direct link to heading")

This prop if passed will be triggered when canvas is scrolled and has the below signature.

```codeBlockLines_e6Vv
(scrollX: number, scrollY: number) => void

```

### onPaste [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#onpaste "Direct link to heading")

This callback is triggered if passed when something is pasted into the scene. You can use this callback in case you want to do something additional when the paste event occurs.

```codeBlockLines_e6Vv
(data: ClipboardData, event: ClipboardEvent | null) => boolean
```

This callback must return a `boolean` value or a [promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/Promise) which resolves to a boolean value.

In case you want to prevent the excalidraw paste action you must return `false`, it will stop the native excalidraw clipboard management flow (nothing will be pasted into the scene).

### onLibraryChange [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#onlibrarychange "Direct link to heading")

This callback if supplied will get triggered when the library is updated and has the below signature.

```codeBlockLines_e6Vv
(items: LibraryItems) => void | Promise<any>
```

It is invoked with empty items when user clears the library. You can use this callback when you want to do something additional when library is updated for example persisting it to local storage.

### generateLinkForSelection [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#generatelinkforselection "Direct link to heading")

This prop if passed will be used to replace the default link generation function. The idea is that the host app can take over the creation of element links, which can be used to navigate to a particular element or a group. If the host app chooses a different key for element link id, then the host app should also take care of the handling and the navigation in `onLinkOpen`.

```codeBlockLines_e6Vv
(id: string, type: "element" | "group") => string;

```

### onLinkOpen [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#onlinkopen "Direct link to heading")

This prop if passed will be triggered when clicked on `link`. To handle the redirect yourself (such as when using your own router for internal links), you must call `event.preventDefault()`.

```codeBlockLines_e6Vv
(element: ExcalidrawElement, event: CustomEvent<{ nativeEvent: MouseEvent }>) => void
```

Example:

```codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm
const history = useHistory();

// open internal links using the app's router, but opens external links in
// a new tab/window
const onLinkOpen: ExcalidrawProps["onLinkOpen"] = useCallback(
  (element, event) => {
    const link = element.link;
    const { nativeEvent } = event.detail;
    const isNewTab = nativeEvent.ctrlKey || nativeEvent.metaKey;
    const isNewWindow = nativeEvent.shiftKey;
    const isInternalLink =
      link.startsWith("/") || link.includes(window.location.origin);
    if (isInternalLink && !isNewTab && !isNewWindow) {
      history.push(link.replace(window.location.origin, ""));
      // signal that we're handling the redirect ourselves
      event.preventDefault();
    }
  },
  [history],
);

```

### langCode [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#langcode "Direct link to heading")

Determines the `language` of the UI. It should be one of the [available language codes](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/i18n.ts#L14). Defaults to `en` (English). We also export default language and supported languages which you can import as shown below.

```codeBlockLines_e6Vv
import { defaultLang, languages } from "@excalidraw/excalidraw";

```

| name | type |
| --- | --- |
| `defaultLang` | `string` |
| `languages` | [`Language[]`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/i18n.ts#L15) |

### viewModeEnabled [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#viewmodeenabled "Direct link to heading")

This prop indicates whether the app is in `view mode`. When supplied, the value takes precedence over _intialData.appState.viewModeEnabled_, the `view mode` will be fully controlled by the host app, and users won't be able to toggle it from within the app.

### zenModeEnabled [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#zenmodeenabled "Direct link to heading")

This prop indicates whether the app is in `zen mode`. When supplied, the value takes precedence over _intialData.appState.zenModeEnabled_, the `zen mode` will be fully controlled by the host app, and users won't be able to toggle it from within the app.

### gridModeEnabled [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#gridmodeenabled "Direct link to heading")

This prop indicates whether the shows the grid. When supplied, the value takes precedence over _intialData.appState.gridModeEnabled_, the grid will be fully controlled by the host app, and users won't be able to toggle it from within the app.

### libraryReturnUrl [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#libraryreturnurl "Direct link to heading")

If supplied, this URL will be used when user tries to install a library from [libraries.excalidraw.com](https://libraries.excalidraw.com/). Defaults to _window.location.origin + window.location.pathname_. To install the libraries in the same tab from which it was opened, you need to set `window.name` (to any alphanumeric string) — if it's not set it will open in a new tab.

### theme [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#theme "Direct link to heading")

This prop controls Excalidraw's theme. When supplied, the value takes precedence over _intialData.appState.theme_, the theme will be fully controlled by the host app, and users won't be able to toggle it from within the app unless _UIOptions.canvasActions.toggleTheme_ is set to `true`, in which case the `theme` prop will control Excalidraw's default theme with ability to allow theme switching (you must take care of updating the `theme` prop when you detect a change to `appState.theme` from the [onChange](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onchange) callback).

You can use [`THEME`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils#theme) to specify the theme.

### name [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#name "Direct link to heading")

This prop sets the `name` of the drawing which will be used when exporting the drawing. When supplied, the value takes precedence over _intialData.appState.name_, the `name` will be fully controlled by host app and the users won't be able to edit from within Excalidraw.

### detectScroll [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#detectscroll "Direct link to heading")

Indicates whether Excalidraw should listen for `scroll` event on the nearest scrollable container in the DOM tree and recompute the coordinates (e.g. to correctly handle the cursor) when the component's position changes. You can disable this when you either know this doesn't affect your app or you want to take care of it yourself (calling the [`refresh()`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#ref) method).

### handleKeyboardGlobally [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#handlekeyboardglobally "Direct link to heading")

Indicates whether to bind keyboard events to `document`. Disabled by default, meaning the keyboard events are bound to the Excalidraw component. This allows for multiple Excalidraw components to live on the same page, and ensures that Excalidraw keyboard handling doesn't collide with your app's (or the browser) when the component isn't focused.

Enable this if you want Excalidraw to handle keyboard even if the component isn't focused (e.g. a user is interacting with the navbar, sidebar, or similar).

### autoFocus [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#autofocus "Direct link to heading")

This prop indicates whether to `focus` the Excalidraw component on page load. Defaults to false.

### generateIdForFile [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#generateidforfile "Direct link to heading")

Allows you to override `id` generation for files added on canvas (images). By default, an SHA-1 digest of the file is used.

```codeBlockLines_e6Vv
(file: File) => string | Promise<string>

```

### validateEmbeddable [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props\#validateembeddable "Direct link to heading")

```codeBlockLines_e6Vv
validateEmbeddable?: boolean | string[] | RegExp | RegExp[] | ((link: string) => boolean | undefined)

```

This is an optional property. By default we support a handful of well-known sites. You may allow additional sites or disallow the default ones by supplying a custom validator. If you pass `true`, all URLs will be allowed. You can also supply a list of hostnames, RegExp (or list of RegExp objects), or a function. If the function returns `undefined`, the built-in validator will be used.

Supplying a list of hostnames (with or without `www.`) is the preferred way to allow a specific list of domains.

- [Storing custom data on Excalidraw elements](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#storing-custom-data-on-excalidraw-elements)
- [isCollaborating](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#iscollaborating)
- [onChange](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onchange)
- [onPointerUpdate](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onpointerupdate)
- [onPointerDown](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onpointerdown)
- [onScrollChange](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onscrollchange)
- [onPaste](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onpaste)
- [onLibraryChange](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onlibrarychange)
- [generateLinkForSelection](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#generatelinkforselection)
- [onLinkOpen](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#onlinkopen)
- [langCode](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#langcode)
- [viewModeEnabled](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#viewmodeenabled)
- [zenModeEnabled](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#zenmodeenabled)
- [gridModeEnabled](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#gridmodeenabled)
- [libraryReturnUrl](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#libraryreturnurl)
- [theme](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#theme)
- [name](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#name)
- [detectScroll](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#detectscroll)
- [handleKeyboardGlobally](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#handlekeyboardglobally)
- [autoFocus](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#autofocus)
- [generateIdForFile](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#generateidforfile)
- [validateEmbeddable](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props#validateembeddable)

## Excalidraw API Constants
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/constants#docusaurus_skipToContent_fallback)

On this page

# Constants

### FONT\_FAMILY [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/constants\#font_family "Direct link to heading")

**How to use**

```codeBlockLines_e6Vv
import { FONT_FAMILY } from "@excalidraw/excalidraw";

```

`FONT_FAMILY` contains all the font families used in `Excalidraw`. The default families are the following:

| Font Family | Description |
| --- | --- |
| `Excalifont` | The `Hand-drawn` font |
| `Nunito` | The `Normal` Font |
| `Comic Shanns` | The `Code` Font |

Pre-selected family is `FONT_FAMILY.Excalifont`, unless it's overriden with `initialData.appState.currentItemFontFamily`.

### THEME [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/constants\#theme "Direct link to heading")

**How to use**

```codeBlockLines_e6Vv
import { THEME } from "@excalidraw/excalidraw";

```

`THEME` contains all the themes supported by `Excalidraw` as explained below

| Theme | Description |
| --- | --- |
| `LIGHT` | The `light` theme |
| `DARK` | The `Dark` theme |

Defaults to `THEME.LIGHT` unless passed in `initialData.appState.theme`

### MIME\_TYPES [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/constants\#mime_types "Direct link to heading")

[`MIME_TYPES`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/constants.ts#L101) contains all the mime types supported by `Excalidraw`.

**How to use**

```codeBlockLines_e6Vv
import { MIME_TYPES } from "@excalidraw/excalidraw";

```

- [FONT\_FAMILY](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/constants#font_family)
- [THEME](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/constants#theme)
- [MIME\_TYPES](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/constants#mime_types)

## Excalidraw Restore Functions
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore#docusaurus_skipToContent_fallback)

On this page

### restoreAppState [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore\#restoreappstate "Direct link to heading")

**_Signature_**

```codeBlockLines_e6Vv
restoreAppState(appState: ImportedDataState["appState"],
  localAppState: Partial<AppState> | null): AppState
```

**_How to use_**

```codeBlockLines_e6Vv
import { restoreAppState } from "@excalidraw/excalidraw";

```

This function will make sure all the `keys` have appropriate `values` in [appState](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L95) and if any key is missing, it will be set to its `default` value.

When `localAppState` is supplied, it's used in place of values that are missing ( `undefined`) in `appState` instead of the defaults.

Use this as a way to not override user's defaults if you persist them.
You can pass `null` / `undefined` if not applicable.

### restoreElements [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore\#restoreelements "Direct link to heading")

**_Signature_**

```codeBlockLines_e6Vv
restoreElements( elements: ImportedDataState["elements"],
  localElements: ExcalidrawElement[] | null | undefined): ExcalidrawElement[],
  opts: { refreshDimensions?: boolean, repairBindings?: boolean, normalizeIndices?: boolean }
)
```

| Prop | Type | Description |
| --- | --- | --- |
| `elements` | [ImportedDataState\["elements"\]](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L114) | The `elements` to be restored |
| [`localElements`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore#localelements) | [ExcalidrawElement\[\]](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L114) \| null \| undefined | When `localElements` are supplied, they are used to ensure that existing restored elements reuse `version` (and increment it), and regenerate `versionNonce`. |
| [`opts`](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore#opts) | `Object` | The extra optional parameter to configure restored elements |

#### localElements [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore\#localelements "Direct link to heading")

When `localElements` are supplied, they are used to ensure that existing restored elements reuse `version` (and increment it), and regenerate `versionNonce`.

Use this when you `import` elements which may already be present in the scene to ensure that you do not disregard the newly imported elements if you're using element version to detect the update

#### opts [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore\#opts "Direct link to heading")

The extra optional parameter to configure restored elements. It has the following attributes

| Prop | Type | Description |
| --- | --- | --- |
| `refreshDimensions` | `boolean` | Indicates whether we should also _recalculate_ text element dimensions. Since this is a potentially costly operation, you may want to disable it if you restore elements in tight loops, such as during collaboration. |
| `repairBindings` | `boolean` | Indicates whether the _bindings_ for the elements should be repaired. This is to make sure there are no containers with non existent bound text element id and no bound text elements with non existent container id. |
| `normalizeIndices` | `boolean` | Indicates whether _fractional indices_ for the elements should be normalized. This is to prevent possible issues caused by using stale (too old, too long) indices. |

**_How to use_**

```codeBlockLines_e6Vv
import { restoreElements } from "@excalidraw/excalidraw";

```

This function will make sure all properties of element is correctly set and if any attribute is missing, it will be set to its default value.

Parameter `refreshDimensions` indicates whether we should also `recalculate` text element dimensions. Defaults to `false`. Since this is a potentially costly operation, you may want to disable it if you restore elements in tight loops, such as during collaboration.

### restore [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore\#restore "Direct link to heading")

**_Signature_**

```codeBlockLines_e6Vv
restore( data: ImportedDataState,
  localAppState: Partial<AppState> | null | undefined,
  localElements: ExcalidrawElement[] | null | undefined
): DataState
opts: { refreshDimensions?: boolean, repairBindings?: boolean, normalizeIndices?: boolean }
)
```

See [`restoreAppState()`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/packages/excalidraw/README.md#restoreAppState) about `localAppState`, and [`restoreElements()`](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/packages/excalidraw/README.md#restoreElements) about `localElements`.

**_How to use_**

```codeBlockLines_e6Vv
import { restore } from "@excalidraw/excalidraw";

```

This function makes sure elements and state is set to appropriate values and set to default value if not present. It is a combination of [restoreElements](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore#restoreelements) and [restoreAppState](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore#restoreappstate).

### restoreLibraryItems [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore\#restorelibraryitems "Direct link to heading")

**_Signature_**

```codeBlockLines_e6Vv
restoreLibraryItems(libraryItems: ImportedDataState["libraryItems"],
  defaultStatus: "published" | "unpublished")
```

**_How to use_**

```codeBlockLines_e6Vv
import { restoreLibraryItems } from "@excalidraw/excalidraw";

restoreLibraryItems(libraryItems, "unpublished");

```

This function normalizes library items elements, adding missing values when needed.

- [restoreAppState](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore#restoreappstate)
- [restoreElements](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore#restoreelements)
  - [localElements](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore#localelements)
  - [opts](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore#opts)
- [restore](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore#restore)
- [restoreLibraryItems](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/utils/restore#restorelibraryitems)

## Excalidraw Initial Data
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/initialdata#docusaurus_skipToContent_fallback)

# initialData

```codeBlockLines_e6Vv
{ elements?: ExcalidrawElement[], appState?: AppState }
```

This helps to load Excalidraw with `initialData`. It must be an object or a [promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/Promise) which resolves to an object containing the below optional fields.

| Name | Type | Description |
| --- | --- | --- |
| `elements` | [ExcalidrawElement\[\]](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/element/types.ts#L114) | The `elements` with which `Excalidraw` should be mounted. |
| `appState` | [AppState](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L95) | The `AppState` with which `Excalidraw` should be mounted. |
| `scrollToContent` | `boolean` | This attribute indicates whether to `scroll` to the nearest element to center once `Excalidraw` is mounted. By default, it will not scroll the nearest element to the center. Make sure you pass `initialData.appState.scrollX` and `initialData.appState.scrollY` when `scrollToContent` is false so that scroll positions are retained |
| `libraryItems` | [LibraryItems](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L247) \| Promise< [LibraryItems](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L200) > | This library items with which `Excalidraw` should be mounted. |
| `files` | [BinaryFiles](https://github.com/excalidraw/excalidraw/blob/master/packages/excalidraw/types.ts#L82) | The `files` added to the scene. |

You might want to use this when you want to load excalidraw with some initial elements and app state.

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw
        initialData={{
          elements: [\
            {\
              type: "rectangle",\
              version: 141,\
              versionNonce: 361174001,\
              isDeleted: false,\
              id: "oDVXy8D6rom3H1-LLH2-f",\
              fillStyle: "hachure",\
              strokeWidth: 1,\
              strokeStyle: "solid",\
              roughness: 1,\
              opacity: 100,\
              angle: 0,\
              x: 100.50390625,\
              y: 93.67578125,\
              strokeColor: "#000000",\
              backgroundColor: "transparent",\
              width: 186.47265625,\
              height: 141.9765625,\
              seed: 1968410350,\
              groupIds: [],\
            },\
          ],
          appState: { zenModeEnabled: true, viewBackgroundColor: "#a5d8ff" },
          scrollToContent: true
        }}
      />
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

## Excalidraw Render Props
[Skip to main content](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/render-props#docusaurus_skipToContent_fallback)

On this page

# Render Props

## renderTopRightUI [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/render-props\#rendertoprightui "Direct link to heading")

```codeBlockLines_e6Vv
(isMobile: boolean, appState:AppState) => JSX | null
```

A function returning `JSX` to render `custom` UI in the top right corner of the app.

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw
        renderTopRightUI={() => {
          return (
            <button
              style={{
                background: "#70b1ec",
                border: "none",
                color: "#fff",
                width: "max-content",
                fontWeight: "bold",
              }}
              onClick={() => window.alert("This is dummy top right UI")}
            >
              Click me
            </button>
          );
        }}
      />
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Click me

Library

Drawing canvas

## renderCustomStats [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/render-props\#rendercustomstats "Direct link to heading")

A function that can be used to render custom stats (returns JSX) in the `nerd stats` dialog.

![Nerd Stats](https://docs.excalidraw.com/assets/images/nerd-stats-275925684149f752e3f5487f11105f12.png)

For example you can use this prop to render the size of the elements in the storage as do in [excalidraw.com](https://excalidraw.com/).

Live Editor

```

function App() {
  return (
    <div style={{ height: "500px" }}>
      <Excalidraw
        renderCustomStats={() => (
          <p style={{ color: "#70b1ec", fontWeight: "bold" }}>
            Dummy stats will be shown here
          </p>
        )}
      />
    </div>
  );
}
```

Result

To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool

## Shapes

1

2

3

4

5

6

7

8

9

0

Library

Drawing canvas

## renderEmbeddable [​](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/render-props\#renderembeddable "Direct link to heading")

```codeBlockLines_e6Vv
(element: NonDeleted<ExcalidrawEmbeddableElement>, appState: AppState) => JSX.Element | null
```

Allows you to replace the renderer for embeddable elements (which renders `<iframe>` elements).

| Parameter | Type | Description |
| --- | --- | --- |
| `element` | `NonDeleted<ExcalidrawEmbeddableElement>` | The embeddable element to be rendered. |
| `appState` | `AppState` | The current state of the UI. |

- [renderTopRightUI](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/render-props#rendertoprightui)
- [renderCustomStats](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/render-props#rendercustomstats)
- [renderEmbeddable](https://docs.excalidraw.com/docs/@excalidraw/excalidraw/api/props/render-props#renderembeddable)

